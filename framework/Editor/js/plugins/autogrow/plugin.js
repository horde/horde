(function(){function d(j){var i=j.getStyle("overflow-y"),h=j.getDocument(),b=CKEDITOR.dom.element.createFromHtml('<span style="margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;">'+(CKEDITOR.env.webkit?"&nbsp;":"")+"</span>",h);h[CKEDITOR.env.ie?"getBody":"getDocumentElement"]().append(b);var a=b.getDocumentPosition(h).y+b.$.offsetHeight;b.remove();j.setStyle("overflow-y",i);return a}var c=function(t){if(!t.window){return}var s=t.document,r=new CKEDITOR.dom.element(s.getWindow().$.frameElement),q=s.getBody(),p=s.getDocumentElement(),o=t.window.getViewPaneSize().height,n=s.$.compatMode=="BackCompat"?q:p,m=d(n);m+=t.config.autoGrow_bottomSpace||0;var b=t.config.autoGrow_minHeight!=undefined?t.config.autoGrow_minHeight:200,a=t.config.autoGrow_maxHeight||Infinity;m=Math.max(m,b);m=Math.min(m,a);if(m!=o){m=t.fire("autoGrow",{currentHeight:o,newHeight:m}).newHeight;t.resize(t.container.getStyle("width"),m,true)}if(n.$.scrollHeight>n.$.clientHeight&&m<a){n.setStyle("overflow-y","hidden")}else{n.removeStyle("overflow-y")}};CKEDITOR.plugins.add("autogrow",{init:function(f){f.addCommand("autogrow",{exec:c,modes:{wysiwyg:1},readOnly:1,canUndo:false,editorFocus:false});var b={contentDom:1,key:1,selectionChange:1,insertElement:1,mode:1};f.config.autoGrow_onStartup&&(b.instanceReady=1);for(var a in b){f.on(a,function(h){var e=f.getCommand("maximize");if(h.editor.mode=="wysiwyg"&&(!e||e.state!=CKEDITOR.TRISTATE_ON)){setTimeout(function(){c(h.editor);c(h.editor)},100)}})}}})})();