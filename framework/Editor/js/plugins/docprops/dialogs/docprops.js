CKEDITOR.dialog.add("docProps",function(z){var y=z.lang.docprops,x=z.lang.common,w={};function v(e,d){var c=function(){b(this);d(this,this._.parentDialog)},b=function(f){f.removeListener("ok",c);f.removeListener("cancel",b)},a=function(f){f.on("ok",c);f.on("cancel",b)};z.execCommand(e);if(z._.storedDialogs.colordialog){a(z._.storedDialogs.colordialog)}else{CKEDITOR.on("dialogDefinition",function(g){if(g.data.name!=e){return}var f=g.data.definition;g.removeListener();f.onLoad=CKEDITOR.tools.override(f.onLoad,function(h){return function(){a(this);f.onLoad=h;if(typeof h=="function"){h.call(this)}}})})}}function u(){var b=this.getDialog(),a=b.getContentElement("general",this.id+"Other");if(!a){return}if(this.getValue()=="other"){a.getInputElement().removeAttribute("readOnly");a.focus();a.getElement().removeClass("cke_disabled")}else{a.getInputElement().setAttribute("readOnly",true);a.getElement().addClass("cke_disabled")}}function t(c,b,a){return function(i,h,g){var f=w,e=typeof a!="undefined"?a:this.getValue();if(!e&&c in f){f[c].remove()}else{if(e&&c in f){f[c].setAttribute("content",e)}else{if(e){var d=new CKEDITOR.dom.element("meta",z.document);d.setAttribute(b?"http-equiv":"name",c);d.setAttribute("content",e);g.append(d)}}}}}function s(b,a){return function(){var d=w,c=b in d?d[b].getAttribute("content")||"":"";if(a){return c}this.setValue(c);return null}}function r(a){return function(f,e,d,c){c.removeAttribute("margin"+a);var b=this.getValue();if(b!==""){c.setStyle("margin-"+a,CKEDITOR.tools.cssLength(b))}else{c.removeStyle("margin-"+a)}}}function q(f){var e={},d=f.getElementsByTag("meta"),c=d.count();for(var b=0;b<c;b++){var a=d.getItem(b);e[a.getAttribute(a.hasAttribute("http-equiv")?"http-equiv":"name").toLowerCase()]=a}return e}function p(c,b,a){c.removeStyle(b);if(c.getComputedStyle(b)!=a){c.setStyle(b,a)}}var o=function(c,b,a){return{type:"hbox",padding:0,widths:["60%","40%"],children:[CKEDITOR.tools.extend({type:"text",id:c,label:y[b]},a||{},1),{type:"button",id:c+"Choose",label:y.chooseColor,className:"colorChooser",onClick:function(){var d=this;v("colordialog",function(f){var e=d.getDialog();e.getContentElement(e._.currentTabId,c).setValue(f.getContentElement("picker","selectedColor").getValue())})}}]}},n="javascript:void((function(){"+encodeURIComponent("document.open();"+(CKEDITOR.env.isCustomDomain()?"document.domain='"+document.domain+"';":"")+'document.write( \'<html style="background-color: #ffffff; height: 100%"><head></head><body style="width: 100%; height: 100%; margin: 0px">'+y.previewHtml+"</body></html>' );document.close();")+"})())";return{title:y.title,minHeight:330,minWidth:500,onShow:function(){var d=z.document,c=d.getElementsByTag("html").getItem(0),b=d.getHead(),a=d.getBody();w=q(d);this.setupContent(d,c,b,a)},onHide:function(){w={}},onOk:function(){var d=z.document,c=d.getElementsByTag("html").getItem(0),b=d.getHead(),a=d.getBody();this.commitContent(d,c,b,a)},contents:[{id:"general",label:x.generalTab,elements:[{type:"text",id:"title",label:y.docTitle,setup:function(a){this.setValue(a.getElementsByTag("title").getItem(0).data("cke-title"))},commit:function(e,d,c,b,a){if(a){return}e.getElementsByTag("title").getItem(0).data("cke-title",this.getValue())}},{type:"hbox",children:[{type:"select",id:"dir",label:x.langDir,style:"width: 100%",items:[[x.notSet,""],[x.langDirLtr,"ltr"],[x.langDirRtl,"rtl"]],setup:function(d,c,b,a){this.setValue(a.getDirection()||"")},commit:function(e,d,c,b){var a=this.getValue();if(a){b.setAttribute("dir",a)}else{b.removeAttribute("dir")}b.removeStyle("direction")}},{type:"text",id:"langCode",label:x.langCode,setup:function(b,a){this.setValue(a.getAttribute("xml:lang")||a.getAttribute("lang")||"")},commit:function(f,e,d,c,b){if(b){return}var a=this.getValue();if(a){e.setAttributes({"xml:lang":a,lang:a})}else{e.removeAttributes({"xml:lang":1,lang:1})}}}]},{type:"hbox",children:[{type:"select",id:"charset",label:y.charset,style:"width: 100%",items:[[x.notSet,""],[y.charsetASCII,"us-ascii"],[y.charsetCE,"iso-8859-2"],[y.charsetCT,"big5"],[y.charsetCR,"iso-8859-5"],[y.charsetGR,"iso-8859-7"],[y.charsetJP,"iso-2022-jp"],[y.charsetKR,"iso-2022-kr"],[y.charsetTR,"iso-8859-9"],[y.charsetUN,"utf-8"],[y.charsetWE,"iso-8859-1"],[y.other,"other"]],"default":"",onChange:function(){var a=this;a.getDialog().selectedCharset=a.getValue()!="other"?a.getValue():"";u.call(a)},setup:function(){var a=this;a.metaCharset="charset" in w;var d=s(a.metaCharset?"charset":"content-type",1,1),c=d.call(a);!a.metaCharset&&c.match(/charset=[^=]+$/)&&(c=c.substring(c.indexOf("=")+1));if(c){a.setValue(c.toLowerCase());if(!a.getValue()){a.setValue("other");var b=a.getDialog().getContentElement("general","charsetOther");b&&b.setValue(c)}a.getDialog().selectedCharset=c}u.call(a)},commit:function(e,d,c,b,a){var f=this;if(a){return}var i=f.getValue(),h=f.getDialog().getContentElement("general","charsetOther");i=="other"&&(i=h?h.getValue():"");i&&!f.metaCharset&&(i=(w["content-type"]?w["content-type"].getAttribute("content").split(";")[0]:"text/html")+"; charset="+i);var g=t(f.metaCharset?"charset":"content-type",1,i);g.call(f,e,d,c)}},{type:"text",id:"charsetOther",label:y.charsetOther,onChange:function(){this.getDialog().selectedCharset=this.getValue()}}]},{type:"hbox",children:[{type:"select",id:"docType",label:y.docType,style:"width: 100%",items:[[x.notSet,""],["XHTML 1.1",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">'],["XHTML 1.0 Transitional",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'],["XHTML 1.0 Strict",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">'],["XHTML 1.0 Frameset",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">'],["HTML 5","<!DOCTYPE html>"],["HTML 4.01 Transitional",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">'],["HTML 4.01 Strict",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">'],["HTML 4.01 Frameset",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">'],["HTML 3.2",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">'],["HTML 2.0",'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">'],[y.other,"other"]],onChange:u,setup:function(){var a=this;if(z.docType){a.setValue(z.docType);if(!a.getValue()){a.setValue("other");var b=a.getDialog().getContentElement("general","docTypeOther");b&&b.setValue(z.docType)}}u.call(a)},commit:function(g,f,e,d,c){if(c){return}var b=this.getValue(),a=this.getDialog().getContentElement("general","docTypeOther");z.docType=b=="other"?a?a.getValue():"":b}},{type:"text",id:"docTypeOther",label:y.docTypeOther}]},{type:"checkbox",id:"xhtmlDec",label:y.xhtmlDec,setup:function(){this.setValue(!!z.xmlDeclaration)},commit:function(e,d,c,b,a){if(a){return}if(this.getValue()){z.xmlDeclaration='<?xml version="1.0" encoding="'+(this.getDialog().selectedCharset||"utf-8")+'"?>';d.setAttribute("xmlns","http://www.w3.org/1999/xhtml")}else{z.xmlDeclaration="";d.removeAttribute("xmlns")}}}]},{id:"design",label:y.design,elements:[{type:"hbox",widths:["60%","40%"],children:[{type:"vbox",children:[o("txtColor","txtColor",{setup:function(d,c,b,a){this.setValue(a.getComputedStyle("color"))},commit:function(f,e,d,c,b){if(this.isChanged()||b){c.removeAttribute("text");var a=this.getValue();if(a){c.setStyle("color",a)}else{c.removeStyle("color")}}}}),o("bgColor","bgColor",{setup:function(e,d,c,b){var a=b.getComputedStyle("background-color")||"";this.setValue(a=="transparent"?"":a)},commit:function(f,e,d,c,b){if(this.isChanged()||b){c.removeAttribute("bgcolor");var a=this.getValue();if(a){c.setStyle("background-color",a)}else{p(c,"background-color","transparent")}}}}),{type:"hbox",widths:["60%","40%"],padding:1,children:[{type:"text",id:"bgImage",label:y.bgImage,setup:function(e,d,c,b){var a=b.getComputedStyle("background-image")||"";if(a=="none"){a=""}else{a=a.replace(/url\(\s*(["']?)\s*([^\)]*)\s*\1\s*\)/i,function(h,g,f){return f})}this.setValue(a)},commit:function(e,d,c,b){b.removeAttribute("background");var a=this.getValue();if(a){b.setStyle("background-image","url("+a+")")}else{p(b,"background-image","none")}}},{type:"button",id:"bgImageChoose",label:x.browseServer,style:"display:inline-block;margin-top:10px;",hidden:true,filebrowser:"design:bgImage"}]},{type:"checkbox",id:"bgFixed",label:y.bgFixed,setup:function(d,c,b,a){this.setValue(a.getComputedStyle("background-attachment")=="fixed")},commit:function(d,c,b,a){if(this.getValue()){a.setStyle("background-attachment","fixed")}else{p(a,"background-attachment","scroll")}}}]},{type:"vbox",children:[{type:"html",id:"marginTitle",html:'<div style="text-align: center; margin: 0px auto; font-weight: bold">'+y.margin+"</div>"},{type:"text",id:"marginTop",label:y.marginTop,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(d,c,b,a){this.setValue(a.getStyle("margin-top")||a.getAttribute("margintop")||"")},commit:r("top")},{type:"hbox",children:[{type:"text",id:"marginLeft",label:y.marginLeft,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(d,c,b,a){this.setValue(a.getStyle("margin-left")||a.getAttribute("marginleft")||"")},commit:r("left")},{type:"text",id:"marginRight",label:y.marginRight,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(d,c,b,a){this.setValue(a.getStyle("margin-right")||a.getAttribute("marginright")||"")},commit:r("right")}]},{type:"text",id:"marginBottom",label:y.marginBottom,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(d,c,b,a){this.setValue(a.getStyle("margin-bottom")||a.getAttribute("marginbottom")||"")},commit:r("bottom")}]}]}]},{id:"meta",label:y.meta,elements:[{type:"textarea",id:"metaKeywords",label:y.metaKeywords,setup:s("keywords"),commit:t("keywords")},{type:"textarea",id:"metaDescription",label:y.metaDescription,setup:s("description"),commit:t("description")},{type:"text",id:"metaAuthor",label:y.metaAuthor,setup:s("author"),commit:t("author")},{type:"text",id:"metaCopyright",label:y.metaCopyright,setup:s("copyright"),commit:t("copyright")}]},{id:"preview",label:x.preview,elements:[{type:"html",id:"previewHtml",html:'<iframe src="'+n+'" style="width: 100%; height: 310px" hidefocus="true" frameborder="0" id="cke_docProps_preview_iframe"></iframe>',onLoad:function(){this.getDialog().on("selectPage",function(b){if(b.data.page=="preview"){var a=this;setTimeout(function(){var f=CKEDITOR.document.getById("cke_docProps_preview_iframe").getFrameDocument(),e=f.getElementsByTag("html").getItem(0),d=f.getHead(),c=f.getBody();a.commitContent(f,e,d,c,1)},50)}});CKEDITOR.document.getById("cke_docProps_preview_iframe").getAscendant("table").setStyle("height","100%")}}]}]}});