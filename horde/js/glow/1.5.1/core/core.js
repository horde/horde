/*	
	Copyright 2009 British Broadcasting Corporation

	Licensed under the Apache License, Version 2.0 (the "License");
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at

	   http://www.apache.org/licenses/LICENSE-2.0

	Unless required by applicable law or agreed to in writing, software
	distributed under the License is distributed on an "AS IS" BASIS,
	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	See the License for the specific language governing permissions and
	limitations under the License.
*/
(function(){var f={glow:true},b=/([$^\\\/()|?+*\[\]{}.-])/g,a=navigator.userAgent.toLowerCase(),j="1.5.1",q=0,g=[],l=0,p=[],n=0,r=false,m={VERSION:j,UID:"glow"+Math.floor(Math.random()*(1<<30)),isDomReady:window.gloader&&gloader.isReady,isReady:window.gloader&&gloader.isReady,env:function(){var t=[0,NaN],d=(/opera[\s\/]([\w\.]+)/.exec(a)||t)[1],u=d?NaN:(/msie ([\w\.]+)/.exec(a)||t)[1],w=(/rv:([\w\.]+).*gecko\//.exec(a)||t)[1],e=(/applewebkit\/([\w\.]+)/.exec(a)||t)[1],s=(/khtml\/([\w\.]+)/.exec(a)||t)[1],v=parseFloat;return{gecko:v(w),ie:v(u),opera:v(d),webkit:v(e),khtml:v(s),version:u||w||e||d||s,standardsMode:document.compatMode!="BackCompat"&&(!u||u>=6)};}(),module:function(t){var s=2,v=t.depends[0]||[],d=v.length,e=t.name,u=window.glow;if(t.library[1]!=m.VERSION){throw new Error("Cannot register "+e+": Version mismatch");}if(v[2]){for(;s<d;s++){if(!f[v[s]]){throw new Error("Module "+v[s]+" required before "+e);}}}t.builder(m);f[e]=true;return m;},ready:function(d){if(this.isReady){d();}else{p[n++]=d;}return this;},_readyBlockers:{},_addReadyBlock:function(d){if(d in m._readyBlockers){throw new Error("Blocker '"+d+"' already exists");}m._readyBlockers[d]=true;m.isReady=false;q++;return m;},_removeReadyBlock:function(d){if(m._readyBlockers[d]){m._readyBlockers[d]=false;q--;if(!q){m.isReady=true;o();}}return m;},onDomReady:function(d){if(this.isDomReady){d();}else{g[l++]=d;}},lang:{trim:function(d){return d.replace(/^\s*((?:[\S\s]*\S)?)\s*$/,"$1");},toArray:function(e){if(e.constructor==Array){return e;}var t=[],s=0,d=e.length;for(;s<d;s++){t[s]=e[s];}return t;},apply:function(d,s){for(var e in s){d[e]=s[e];}return d;},map:function(e,w,v){if(Array.prototype.map){return Array.prototype.map.call(e,w,v||e);}if(!w.call){throw new TypeError();}var d=e.length,u=[],t=v||e,s=0;for(;s<d;s++){if(s in e){u[s]=w.call(t,e[s],s,e);}}return u;},replace:(function(){var d="g".replace(/g/,function(){return"l";})!="l",e=String.prototype.replace;return function(x,v,s){var y,u,w,t;if(!d||typeof(s)!="function"){return e.call(x,v,s);}if(!(v instanceof RegExp)){y=x.indexOf(v);return y==-1?x:e.call(x,v,s.call(null,v,y,x));}t=[];w=v.lastIndex=0;while((u=v.exec(x))!=null){y=u.index;t[t.length]=x.slice(w,y);t[t.length]=s.apply(null,u);if(v.global){w=v.lastIndex;}else{w=y+u[0].length;break;}}t[t.length]=x.slice(w);return t.join("");};})(),interpolate:function(e,u,t){var v,d,s;t=t||{};if(t.delimiter==undefined){v=/\{[^{}]+\}/g;}else{d=t.delimiter.substr(0,1).replace(b,"\\$1");s=(t.delimiter.length==1)?d:t.delimiter.substr(1,1).replace(b,"\\$1");v=new RegExp(d+"[^"+d+s+"]+"+s,"g");}return e.replace(v,function(z){var y=z.substring(1,z.length-1),B=y.split("."),A=u;if(u[y]){return u[y];}for(var x=0,w=B.length;x<w;x++){if(A[B[x]]!=undefined){A=A[B[x]];}else{return z;}}return A;});},hasOwnProperty:{}.hasOwnProperty?function(d,e){return d.hasOwnProperty(e);}:function(w,x){var t=w[x],v=w.__proto__,s=v?v[x]:{};if(t!==s){return true;}var e=m.lang.hasOwnProperty(v,x),d=v[x]={},u=(w[x]!==d);delete v[x];if(e){v[name]=d;}return u;},extend:function(e,t,d){var s=function(){},u;s.prototype=t.prototype;u=new s();e.prototype=u;u.constructor=e;e.base=t;if(d){m.lang.apply(e.prototype,d);}},clone:function(s){var d,t,e;s=s.valueOf();if(typeof s!=="object"){return s;}else{if(s[0]||s.concat){e=[];d=s.length;while(d--){e[d]=arguments.callee(s[d]);}}else{e={};for(d in s){e[d]=arguments.callee(s[d]);}}return e;}}}},h=m.env,k=document;function c(){m.isDomReady=true;for(var d=0;d<l;d++){g[d]();}}function o(){if(r){return;}r=true;for(var d=0;d<n;){p[d]();d++;if(q){break;}}p=p.slice(d);n=n-d;r=false;}(function(){if(m.isDomReady){return;}m._addReadyBlock("glow_domReady");if(h.ie){if(typeof window.frameElement!="undefined"){k.attachEvent("onreadystatechange",function(){if(k.readyState=="complete"){k.detachEvent("onreadystatechange",arguments.callee);c();m._removeReadyBlock("glow_domReady");}});}else{(function(){try{k.documentElement.doScroll("left");}catch(t){setTimeout(arguments.callee,0);return;}c();m._removeReadyBlock("glow_domReady");})();}}else{if(m.env.webkit<525.13&&typeof k.readyState!="undefined"){var e=function(){if(/loaded|complete/.test(k.readyState)){c();m._removeReadyBlock("glow_domReady");}else{setTimeout(e,0);}};e();}else{var s=function(){if(s.fired){return;}s.fired=true;c();m._removeReadyBlock("glow_domReady");};k.addEventListener("DOMContentLoaded",s,false);var d=window.onload;window.onload=function(){if(d){d();}s();};}}})();m.isSupported=!(h.ie<6||(h.gecko<1.9&&!/^1\.8\.1/.test(h.version))||h.opera<9||h.webkit<412);if(!m.isSupported){m._addReadyBlock("glow_browserSupport");}if(window.gloader){gloader.library({name:"glow",version:"1.5.1",builder:function(){return m;}});}else{if(window.glow){throw new Error("Glow global object already exists");}else{window.glow=m;}}if(m.ie){try{document.execCommand("BackgroundImageCache",false,true);}catch(i){}}})();
/*@cc_on @*/
/*@if (@_jscript_version > 5.5)@*/
(window.gloader||glow).module({name:"glow.dom",library:["glow","1.5.1"],depends:[],builder:function(q){var j=q.env,g=q.lang,n={tagName:/^(\w+|\*)/,combinator:/^\s*([>]?)\s*/,classNameOrId:(j.webkit<417)?new RegExp("^([\\.#])((?:(?![\\.#\\[:\\s\\\\]).|\\\\.)+)"):/^([\.#])((?:[^\.#\[:\\\s]+|\\.)+)/},S=/([$^\\\/()|?+*\[\]{}.-])/g,z={},M={checked:"checked","class":"className",disabled:"disabled","for":"htmlFor",maxlength:"maxLength"},b={checked:true,disabled:true},Z={maxlength:function(r){return r.toString()=="2147483647"?undefined:r;}},X=1,u="_unique"+q.UID,F={black:0,silver:12632256,gray:8421504,white:16777215,maroon:8388608,red:16711680,purple:8388736,fuchsia:16711935,green:32768,lime:65280,olive:8421376,yellow:16776960,navy:128,blue:255,teal:32896,aqua:65535,orange:16753920},B=/height|top/,o=/^rgb\(([\d\.]+)(%?),\s*([\d\.]+)(%?),\s*([\d\.]+)(%?)/i,x=/^(?:(width|height)|(border-(top|bottom|left|right)-width))$/,A=/width|height|top$|bottom$|left$|right$|spacing$|indent$|font-size/,P,c,p=["Top","Right","Bottom","Left"],N=4,w="padding",m="margin",W="border",C="Width",H,E,V=window,h=document,Q,D,t,L=h.createElement("div");if(j.ie){window.attachEvent("onunload",function(){L=null;});}q.ready(function(){Q=h.body;D=h.documentElement;});(function(){var r=h.createElement("div");r.a=1;t=!!r.cloneNode(true).a;})();function s(r){return new RegExp(["(^|\\s)",r.replace(S,"\\$1"),"($|\\s)"].join(""),"g");}function J(ac){var ab=[],aa=0;L.innerHTML="<b>a</b>"+ac;while(L.childNodes[1]){ab[aa++]=L.removeChild(L.childNodes[1]);}L.innerHTML="";return ab;}function k(ac){var ab=[],aa=0;for(;ac[aa];aa++){ab[aa]=ac[aa];}return ab;}function d(ad,aa){for(var ac=this,r=0,ab=ac.length;r<ab;r++){aa.call(ac[r],ad.call?ad.call(ac[r],r):ad);}return ac;}if(document.all){P=function(ab,aa){var ac=0,r=ab.length,ad=aa.length;if(typeof aa.length=="number"){for(;ac<ad;ac++){ab[r++]=aa[ac];}}else{for(;aa[ac];ac++){ab[r++]=aa[ac];}}};}else{P=function(ab,aa){var ac=0,r=ab.length;for(;aa[ac];ac++){ab[r++]=aa[ac];}};}function I(r){return(r.ownerDocument&&!r.ownerDocument.body)||(r.documentElement&&!r.documentElement.body);}if(j.ie){c=function(ab){if(ab.length==1){return ab;}var ad=[],aa=0,ac=0;for(;ab[ac];ac++){if(ab[ac].getAttribute(u)!=X&&ab[ac].nodeType==1){ad[aa++]=ab[ac];}ab[ac].setAttribute(u,X);}for(ac=0;ab[ac];ac++){ab[ac].removeAttribute(u);}X++;return ad;};}else{c=function(ab){if(ab.length==1){return ab;}var ad=[],aa=0,ac=0;for(;ab[ac];ac++){if(ab[ac][u]!=X&&ab[ac].nodeType==1){ad[aa++]=ab[ac];}ab[ac][u]=X;}X++;return ad;};}if(document.all){E=function(aa,ac){var ad=[],ab=0;for(;ac[ab];ab++){if(aa=="*"&&ac[ab].all&&!I(ac[ab])){P(ad,ac[ab].all);}else{P(ad,ac[ab].getElementsByTagName(aa));}}return ad;};}else{E=function(ab,ad){var ae=[],ac=0,aa=ad.length;for(;ac<aa;ac++){P(ae,ad[ac].getElementsByTagName(ab));}return ae;};}function a(ad){var ac=[],ae=ad.childNodes,ab=0,aa=0;for(;ae[ab];ab++){if(ae[ab].nodeType==1&&ae[ab].nodeName!="!"){ac[aa++]=ae[ab];}}return ac;}function K(af){var aa,ac=N,ah=j.standardsMode?D:Q,ai,ad=[],ag=[],ae=j.ie==7?"Width":"",ab=j.ie==7?"0":"none";if(af.window){aa=(j.webkit<522.11&&{width:af.innerWidth,height:af.innerHeight})||(j.webkit&&{width:Q.clientWidth,height:af.innerHeight})||(j.opera<9.5&&{width:Q.clientWidth,height:Q.clientHeight})||{width:ah.clientWidth,height:ah.clientHeight};}else{if(af.getElementById){aa={width:Math.max(Q.scrollWidth,Q.offsetWidth,D.clientWidth,D.scrollWidth,D.offsetWidth),height:Math.max(Q.scrollHeight,Q.offsetHeight,D.clientHeight,D.scrollHeight,D.offsetHeight)};}else{ai=af.style.cssText;while(ac--){if(j.ie==7){ad[ac]=af.style[w+p[ac]];ag[ac]=af.style[W+p[ac]];}af.style[w+p[ac]]="0";af.style[W+p[ac]+ae]=ab;}aa={width:af.offsetWidth,height:af.offsetHeight};if(j.ie!=7){af.style.cssText=ai;}else{ac=N;while(ac--){af.style[w+p[ac]]=ad[ac];af.style[W+p[ac]+ae]=ag[ac];}}}}return aa;}function Y(r){if(j.ie<6){return r.document.body;}else{return r.ownerDocument.body;}}function f(ac,ad,ab){if(typeof ad=="number"||/\d$/.test(ad)){ad+="px";}for(var aa=0,r=ac.length;aa<r;aa++){ac[aa].style[ab]=ad;}}function R(r){if(r=="float"){return j.ie?"styleFloat":"cssFloat";}return g.replace(r,/-(\w)/g,function(aa,ab){return ab.toUpperCase();});}function v(ag,ae){var ad,af=ag.style,ac=af.display,aa=af.visibility,ab=af.position;af.visibility="hidden";af.position="absolute";af.display="block";if(!e(ag)){af.position=ab;ad=v(ag.parentNode,ae);af.display=ac;af.visibility=aa;}else{ad=ae();af.display=ac;af.position=ab;af.visibility=aa;}return ad;}function e(r){return r.offsetWidth||r.offsetHeight;}function U(ai,ac){var ab,ak=0,ag=0,af=ac.length,ae=h.defaultView&&(h.defaultView.getComputedStyle(ai,null)||h.defaultView.getComputedStyle),ad=ai.currentStyle,aj,ah,aa=ac.push||x.exec(ac)||[];if(ac.push){for(;ag<af;ag++){ak+=parseInt(U(ai,ac[ag]),10)||0;}return ak+"px";}if(aa[1]){if(!e(ai)){return v(ai,function(){return K(ai)[ac]+"px";});}else{return K(ai)[ac]+"px";}}else{if(aa[2]&&q.env.ie&&U(ai,"border-"+aa[3]+"-style")=="none"){return"0";}else{if(ae){if(typeof ae=="function"){aj=ai.style.display;ab=v(ai,function(){if(ac=="display"){ai.style.display=aj;if(!h.defaultView.getComputedStyle(ai,null)){return"none";}ai.style.display="block";}return U(ai,ac);});}else{if(q.env.webkit>500&&ac=="margin-right"&&ae.getPropertyValue("position")!="absolute"){ac="margin-left";}ab=ae.getPropertyValue(ac);}}else{if(ad){if(ac=="opacity"){ah=/alpha\(opacity=([^\)]+)\)/.exec(ad.filter);return ah?String(parseInt(ah[1],10)/100):"1";}ab=String(ad[R(ac)]);if(/^-?\d+[a-z%]+$/i.test(ab)&&ac!="font-size"){ab=G(ai,ab,B.test(ac))+"px";}}}}}if(ac.indexOf("color")!=-1){ab=O(ab).toString();}else{if(ab.indexOf("url")==0){ab=ab.replace(/\"/g,"");}}return ab;}function G(ac,ae,r){if(/^-?\d+(px)?$/i.test(ae)){return parseInt(ae);}var ab=r?"top":"left",ad=r?"Top":"Left",af=ac.style,ag=af.left,ah=af.overflow,aa=af.margin;af.position="absolute";af.margin="0";af[ab]=ae||0;ae=ac["offset"+ad];af.position=ah;af[ab]=ag;af.margin=aa;return ae;}function O(ab){if(/^(transparent|rgba\(0, ?0, ?0, ?0\))$/.test(ab)){return"transparent";}var af,aa,ag,ah,ac,ae=Math.round,ai=parseInt,ad=parseFloat;if(af=o.exec(ab)){aa=af[2]?ae(((ad(af[1])/100)*255)):ai(af[1]);ag=af[4]?ae(((ad(af[3])/100)*255)):ai(af[3]);ah=af[6]?ae(((ad(af[5])/100)*255)):ai(af[5]);}else{if(typeof ab=="number"){ac=ab;}else{if(ab.charAt(0)=="#"){if(ab.length=="4"){ab="#"+ab.charAt(1)+ab.charAt(1)+ab.charAt(2)+ab.charAt(2)+ab.charAt(3)+ab.charAt(3);}ac=ai(ab.slice(1),16);}else{ac=F[ab];}}aa=(ac)>>16;ag=(ac&65280)>>8;ah=(ac&255);}ab=new String("rgb("+aa+", "+ag+", "+ah+")");ab.r=aa;ab.g=ag;ab.b=ah;return ab;}function i(ae){var ad="",ab=ae.childNodes,ac=0,aa=ab.length;for(;ac<aa;ac++){if(ab[ac].nodeType==3){ad+=ab[ac].nodeValue;}else{if(ab[ac].nodeType==1){ad+=i(ab[ac]);}}}return ad;}function l(af,ac){var ab=[],aa=0,r,ad=0,ae=af.length;for(;ad<ae;ad++){r=af[ad];while(r=r[ac+"Sibling"]){if(r.nodeType==1&&r.nodeName!="!"){ab[aa++]=r;break;}}}return T.get(ab);}function y(){var aa=window,r=j.standardsMode?h.documentElement:Q;return{x:r.scrollLeft||aa.pageXOffset||0,y:r.scrollTop||aa.pageYOffset||0};}var T={};T.get=function(){var ad=new q.dom.NodeList(),ac=0,ab=arguments,aa=ab.length;for(;ac<aa;ac++){if(typeof ab[ac]=="string"){ad.push(new q.dom.NodeList().push(h).get(ab[ac]));}else{ad.push(ab[ac]);}}return ad;};T.create=function(ad){var ac=J(ad),r=[],aa=0,ab=0;for(;ac[aa];aa++){if(ac[aa].nodeType==1&&ac[aa].nodeName!="!"){r[ab++]=ac[aa];}else{if(ac[aa].nodeType==3&&g.trim(ac[aa].nodeValue)!==""){throw new Error("glow.dom.create - Text must be wrapped in an element");}}}return new T.NodeList().push(r);};T.parseCssColor=function(r){var aa=O(r);return{r:aa.r,g:aa.g,b:aa.b};};T.NodeList=function(){this.length=0;};T.NodeList.prototype={item:function(r){return this[r];},push:function(){var ab=arguments,aa=ab.length,ac=0,af,r,ad=this,ae=Array.prototype.push;for(;ac<aa;ac++){if(!ab[ac]){continue;}else{if(ab[ac].nodeType==1||ab[ac].nodeType==9||ab[ac].document){ae.call(ad,ab[ac]);}else{if(ab[ac][0]){for(af=0,r=ab[ac].length;af<r;af++){ae.call(ad,ab[ac][af]);}}}}}return ad;},each:function(ac){for(var r=0,ab=this,aa=ab.length;r<aa;r++){ac.call(ab[r],r,ab);}return ab;},eq:function(ac){var ab=this,r=0,aa=ab.length;if(!ac.push){ac=[ac];}if(ac.length!=ab.length){return false;}for(;r<aa;r++){if(ab[r]!=ac[r]){return false;}}return true;},isWithin:function(ac){if(ac.push){ac=ac[0];}if(!ac||!this.length){return false;}var ab=this,r=0,aa=ab.length,ad;if(ac.contains&&j.webkit>=521){for(;r<aa;r++){if(!(ac.contains(ab[r])&&ab[r]!=ac)){return false;}}}else{if(ab[0].compareDocumentPosition){for(;r<aa;r++){if(!(ab[r].compareDocumentPosition(ac)&8)){return false;}}}else{for(;r<aa;r++){ad=ab[r];while(ad=ad.parentNode){if(ad==ac){break;}}if(!ad){return false;}}}}return true;},attr:function(ab){var ad=this,aa=arguments,r=aa.length,ac,ae;if(ad.length===0){return r>1?ad:undefined;}if(typeof ab=="object"){for(ac in ab){if(g.hasOwnProperty(ab,ac)){ad.attr(ac,ab[ac]);}}return ad;}if(j.ie&&M[ab]){if(r>1){d.call(ad,aa[1],function(af){this[M[ab]]=af;});return ad;}ae=ad[0][M[ab]];if(b[ab]){return ae?ab:undefined;}else{if(Z[ab]){return Z[ab](ae);}}return ae;}if(r>1){d.call(ad,aa[1],function(af){this.setAttribute(ab,af);});return ad;}return I(ad[0])?ad[0].getAttribute(ab):ad[0].getAttribute(ab,2);},removeAttr:function(aa){var r=j.ie&&M[aa],ad=this,ab=0,ac=ad.length;for(;ab<ac;ab++){if(r){ad[ab][r]="";}else{ad[ab].removeAttribute(aa);}}return ad;},hasAttr:function(ac){var ae=this[0],ab=ae.attributes;if(I(ae)&&j.ie){var ab=ae.attributes,ad=0,aa=ab.length;for(;ad<aa;ad++){if(ab[ad].nodeName==ac){return ab[ad].specified;}}return false;}else{if(this[0].getAttributeNode){var r=this[0].getAttributeNode(ac);return r?r.specified:false;}}return typeof ab[r]!="undefined";},hasClass:function(r){for(var aa=0,ab=this.length;aa<ab;aa++){if((" "+this[aa].className+" ").indexOf(" "+r+" ")!=-1){return true;}}return false;},addClass:function(r){for(var aa=0,ab=this.length;aa<ab;aa++){if((" "+this[aa].className+" ").indexOf(" "+r+" ")==-1){this[aa].className+=" "+r;}}return this;},removeClass:function(r){var ab=s(r),ad=this,aa=0,ac=ad.length;for(;aa<ac;aa++){ad[aa].className=ad[aa].className.replace(ab," ");}return ad;},toggleClass:function(aa){var ac=this.length,ab,r=" "+aa+" ";while(ac--){ab=" "+this[ac].className+" ";if(ab.indexOf(r)!=-1){this[ac].className=ab.replace(r," ");}else{this[ac].className+=" "+aa;}}return this;},val:function(){function ac(ag){var ad=ag.type,ae=ag.checked,ai=ag.value,aj=[],af=0;if(ad=="radio"){return ae?ai:"";}else{if(ad=="checkbox"){return ae?ai:"";}else{if(ad=="select-one"){return ag.selectedIndex>-1?ag.options[ag.selectedIndex].value:"";}else{if(ad=="select-multiple"){for(var ah=ag.options.length;af<ah;af++){if(ag.options[af].selected){aj[aj.length]=ag.options[af].value;}}return aj;}else{return ai;}}}}}function aa(ae){var al={},ak={},ah=ae.elements,aj=0,ag=ah.length,ad,an,ai,af,am;for(;aj<ag;aj++){an=ah[aj];am=an.nodeName.toLowerCase();ad=an.name;if(am=="fieldset"||am=="object"||!ad){continue;}if(an.type=="checkbox"&&!an.checked){if(!ad in al){al[ad]=undefined;}}else{if(an.type=="radio"){if(ak[ad]){ak[ad][ak[ad].length]=an;}else{ak[ad]=[an];}}else{var ao=ac(an);if(ad in al){if(al[ad].push){al[ad][al[ad].length]=ao;}else{al[ad]=[al[ad],ao];}}else{al[ad]=ao;}}}}for(aj in ak){ai=0;for(ag=ak[aj].length;ai<ag;ai++){af=ak[aj][ai];ad=af.name;if(af.checked){al[af.name]=af.value;break;}}if(!ad in al){al[ad]=undefined;}}return al;}function r(ae,am){var ad,an,aj={},ah,ai=0,af,ak,al,ag;for(ad in am){an=ae[ad];if(an&&an[0]){am[ad]=am[ad]&&am[ad].push?am[ad]:[am[ad]];aj.radios=[];aj.checkboxesSelects=[];aj.multiSelects=[];aj.other=[];for(ai=0;an[ai];ai++){ag=an[ai].type;if(ag=="radio"){ah="radios";}else{if(ag=="select-one"||ag=="checkbox"){ah="checkboxesSelects";}else{if(ag=="select-multiple"){ah="multiSelects";}else{ah="other";}}}aj[ah][aj[ah].length]=an[ai];}for(ai=0;aj.multiSelects[ai];ai++){am[ad]=ab(aj.multiSelects[ai],am[ad]);}for(ai=0;aj.checkboxesSelects[ai];ai++){ab(aj.checkboxesSelects[ai],"");for(af=0,ak=am[ad].length;af<ak;af++){if(ab(aj.checkboxesSelects[ai],am[ad][af])){am[ad].slice(af,1);break;}}}for(ai=0;aj.radios[ai];ai++){aj.radios[ai].checked=false;al=false;for(af=0,ak=am[ad].length;af<ak;af++){if(ab(aj.radios[ai],am[ad][af])){am[ad].slice(af,1);al=true;break;}if(al){break;}}}for(ai=0;aj.other[ai]&&am[ad][ai]!==undefined;ai++){ab(aj.other[ai],am[ad][ai]);}}else{if(an&&an.nodeName){ab(an,am[ad]);}}}}function ab(af,ah){var ai=0,ae,ag=0,al,ad,ak;if(af.type=="select-one"){for(ae=af.options.length;ai<ae;ai++){if(af.options[ai].value==ah){af.selectedIndex=ai;return true;}}return false;}else{if(af.type=="select-multiple"){var aj=!!ah.push;for(ai=0,ae=af.options.length;ai<ae;ai++){ad=af.options[ai];ak=ad.value;if(aj){ad.selected=false;for(al=ah.length;ag<al;ag++){if(ak==ah[ag]){ad.selected=true;ah.splice(ag,1);break;}}}else{return ad.selected=ah==ak;}}return false;}else{if(af.type=="radio"||af.type=="checkbox"){af.checked=ah==af.value;return ah==af.value;}else{af.value=ah;return true;}}}}return function(){var ad=arguments,ah=ad[0],ag=this,ae=0,af=ag.length;if(ad.length===0){return ag[0].nodeName=="FORM"?aa(ag[0]):ac(ag[0]);}if(ag[0].nodeName=="FORM"){if(!typeof ah=="object"){throw"value for FORM must be object";}r(ag[0],ah);}else{for(;ae<af;ae++){ab(ag[ae],ah);}}return ag;};}(),slice:function(){return new T.NodeList().push(Array.prototype.slice.apply(this,arguments));},sort:function(ac){var ab=this,aa=0,r;if(!ab.length){return ab;}if(!ac){if(typeof ab[0].sourceIndex=="number"){ac=function(ae,ad){return ae.sourceIndex-ad.sourceIndex;};}else{if(ab[0].compareDocumentPosition){ac=function(ae,ad){return 3-(ae.compareDocumentPosition(ad)&6);};}else{r=E("*",[h]);for(;r[aa];aa++){r[aa]._sourceIndex=aa;}ac=function(ae,ad){return ae._sourceIndex-ad._sourceIndex;};}}}return T.get([].sort.call(ab,ac));},filter:function(ad){var aa=[],r=0,ab=0,ac=this.length;for(;ab<ac;ab++){if(ad.apply(this[ab],[ab])){aa[r++]=this[ab];}}return T.get(aa);},children:function(){var aa=[],r=0,ab=0,ae=0,ad=this.length,ac;for(;ab<ad;ab++){aa=aa.concat(a(this[ab]));}return T.get(aa);},parent:function(){var aa=[],r=0,ab=0,ac=this.length;for(;ab<ac;ab++){aa[r++]=this[ab].parentNode;}return T.get(c(aa));},next:function(){return l(this,"next");},prev:function(){return l(this,"previous");},is:function(aa){var ab=q.dom.get(aa),ad=0,r=this.length,ac,ae;node:for(;ad<r;ad++){for(ac=0,ae=ab.length;ac<ae;ac++){if(this[ad]==ab[ac]){continue node;}}return false;}return true;},text:function(){var r=arguments,aa=0,ac=this,ab=ac.length;if(r.length>0){for(;aa<ab;aa++){ac[aa].innerHTML="";ac[aa].appendChild(h.createTextNode(r[0]));}return ac;}return ac[0].innerText||ac[0].textContent==undefined?i(ac[0]):ac[0].textContent;},empty:function(){var aa=0,r=this.length;for(;aa<r;aa++){while(this[aa].firstChild){this[aa].removeChild(this[aa].firstChild);}}return this;},remove:function(){for(var ac=this,aa=0,ab=ac.length,r;aa<ab;aa++){if(r=ac[aa].parentNode){r.removeChild(ac[aa]);}}return ac;},destroy:function(){this.appendTo(L);L.innerHTML="";Array.prototype.splice.call(this,0,this.length);return this;},clone:function(ac){var aa=[],ab=this.length,r,ad="__eventId"+q.UID;while(ab--){aa[ab]=this[ab].cloneNode(true);}if(t&&!I(aa[0])){r=T.get(aa).get("*").push(aa);ab=r.length;while(ab--){r[ab][ad]=null;}}if(ac){if(!q.events){throw"glow.events required to clone event listeners";}q.events._copyListeners(this.get("*").push(this),r||T.get(aa).get("*").push(aa));}return T.get(aa);},html:function(r){var aa=0,ab=this.length;if(r!=undefined){for(;aa<ab;aa++){this[aa].innerHTML=r;}return this;}return this[0].innerHTML;},width:function(r){if(r==undefined){return K(this[0]).width;}f(this,r,"width");return this;},height:function(r){if(r==undefined){return K(this[0]).height;}f(this,r,"height");return this;},show:function(){var ab=0,aa=this.length,r,ac;for(;ab<aa;ab++){r=T.get(this[ab]);ac=r[0].style;if(r.css("display")=="none"){ac.display="";ac.visibility="visible";if(r.css("display")=="none"){ac.display="block";}}}return this;},hide:function(){var ab=0,aa=this.length,r;for(;ab<aa;ab++){r=T.get(this[ab]);r[ab].style.display="none";r[ab].style.visibility="hidden";}return this;},css:function(af,ac){var ab=this,ae,aa=0,r=ab.length,ad=af;if(ac!=undefined){af=R(af);for(;aa<r;aa++){ae=ab[aa].style;if(typeof ac=="number"&&A.test(ad)){ac=ac.toString()+"px";}if(af=="opacity"&&j.ie){ae.zoom="1";if(ac===""){ae.filter="";}else{ae.filter="alpha(opacity="+Math.round(Number(ac,10)*100)+")";}}else{ae[af]=ac;}}return ab;}else{if(!r){return;}return U(ab[0],af);}},offset:function(){var ae=this[0],ac=y();if(ae.getBoundingClientRect){var ag=ae.getBoundingClientRect();return{top:ag.top+ac.y-D.clientTop,left:ag.left+ac.x-D.clientLeft};}else{var af=0,r=0,aa=ae,ah,ad=false,ab;do{r+=ae.offsetLeft;af+=ae.offsetTop;if(U(ae,"position")=="fixed"){ad=true;}if(j.gecko||j.webkit>500){r+=parseInt(U(ae,"border-left-width"));af+=parseInt(U(ae,"border-top-width"));}if(ae.nodeName.toLowerCase!="body"){ab=ae;}}while(ae=ae.offsetParent);ae=aa;while((ae=ae.parentNode)&&(ae!=Q)&&(ae!=D)){r-=ae.scrollLeft;af-=ae.scrollTop;if(j.gecko&&U(ae,"overflow")!="visible"){r+=parseInt(U(ae,"border-left-width"));af+=parseInt(U(ae,"border-top-width"));}}if(ad){r+=ac.x;af+=ac.y;}if((j.webkit<500&&(ad||U(ab,"position")=="absolute"))||(j.gecko&&U(ab,"position")!="absolute")){r-=Q.offsetLeft;af-=Q.offsetTop;}return{left:r,top:af};}},append:function(ae){var ad=this,aa=0,ab=1,ac=ad.length,r;if(ac==0){return ad;}r=typeof ae=="string"?k(J(ae)):ae.nodeType?[ae]:k(ae);for(;r[aa];aa++){ad[0].appendChild(r[aa]);}for(;ab<ac;ab++){for(aa=0;r[aa];aa++){ad[ab].appendChild(r[aa].cloneNode(true));}}return ad;},prepend:function(af){var ad=this,aa=0,ab=1,ac=ad.length,r,ae;if(ac==0){return ad;}r=typeof af=="string"?k(J(af)):af.nodeType?[af]:k(af);ae=ad[0].firstChild;for(;r[aa];aa++){ad[0].insertBefore(r[aa],ae);}for(;ab<ac;ab++){ae=ad[ab].firstChild;for(aa=0;r[aa];aa++){ad[ab].insertBefore(r[aa].cloneNode(true),ae);}}return ad;},appendTo:function(r){if(!(r instanceof T.NodeList)){r=T.get(r);}r.append(this);return this;},prependTo:function(r){if(!(r instanceof T.NodeList)){r=T.get(r);}r.prepend(this);return this;},after:function(ag){var af=this,ae=af.length,ab,aa,ac,ad=1,r;if(ae==0){return af;}ab=typeof ag=="string"?T.create(ag):ag instanceof T.NodeList?ag:T.get(ag);aa=ab.length;for(ac=aa-1;ac>=0;ac--){af[0].parentNode.insertBefore(ab[ac],af[0].nextSibling);}for(;ad<ae;ad++){r=ab.clone();for(ac=aa-1;ac>=0;ac--){af[ad].parentNode.insertBefore(r[ac],af[ad].nextSibling);}}return af;},before:function(ag){var af=this,ae=af.length,ac=0,ad=1,ab,aa,r;if(ae==0){return af;}ab=typeof ag=="string"?T.create(ag):ag instanceof T.NodeList?ag:T.get(ag);aa=ab.length;for(;ac<aa;ac++){af[0].parentNode.insertBefore(ab[ac],af[0]);}for(;ad<ae;ad++){r=ab.clone();for(ac=0;ac<aa;ac++){af[ad].parentNode.insertBefore(r[ac],af[ad]);}}return af;},insertAfter:function(r){if(!(r instanceof T.NodeList)){r=T.get(r);}r.after(this);return this;},insertBefore:function(r){if(!(r instanceof T.NodeList)){r=T.get(r);}r.before(this);return this;},replaceWith:function(r){if(j.webkit<500){this.after(H).remove();T.get("u.glow-placeholder").after(r).remove();}else{this.after(r).remove();}return this;},get:function(){function ab(ao){if(z[ao]){return z[ao];}var ai=[],ar=0,aj,ap,al,am,aq,an,ak=true;while(ao&&ao!=an){ap="";al="";an=ao;if(am=n.combinator.exec(ao)){aj=am[1];ao=ao.slice(am[0].length);}if(am=n.tagName.exec(ao)){ap=am[1];ao=ao.slice(am[0].length);}if(am=n.classNameOrId.exec(ao)){if(am[1]=="#"){al=am[2];ao=ao.slice(am[0].length);}}if(!aj){if(al&&ak){ai[ar++]=[ad,[al.replace(/\\/g,""),ap||"*",null]];}else{ai[ar++]=[E,[ap||"*",null]];if(al){ai[ar++]=[ag,[al.replace(/\\/g,""),null]];}}}else{if(aj==">"){ai[ar++]=[ac,[null]];if(al){ai[ar++]=[ag,[al.replace(/\\/g,""),null]];}if(ap&&ap!="*"){ai[ar++]=[ah,[ap,null]];}}}aq=true;while(aq){if(ao.charAt(0)=="#"||ao.charAt(0)=="."){if(am=n.classNameOrId.exec(ao)){if(ao.charAt(0)=="#"){ai[ar++]=[ag,[am[2].replace(/\\/g,""),null]];}else{ai[ar++]=[af,[am[2].replace(/\\/g,""),null]];}ao=ao.slice(am[0].length);}else{throw new Error("Invalid Selector");}}else{aq=false;}}ak=false;}if(ao!==""){throw new Error("Invalid Selector");}return z[ao]=ai;}function ae(ai,am){var ak=am;for(var aj=0,an=ai.length;aj<an;aj++){ai[aj][1][ai[aj][1].length-1]=ak;ak=ai[aj][0].apply(this,ai[aj][1]);}return ak;}function ad(aj,an,ak){var ai=[],ar=0,am=[],aq=0,ao;for(var ap=0,al=ak.length;ap<al;ap++){if(ak[ap].getElementById){ao=ak[ap].getElementById(aj);if(ao&&(ao.tagName==an.toUpperCase()||an=="*"||ao.tagName==an)){ai[ar++]=ao;}}else{am[aq++]=ak[ap];}}if(am[0]){am=E(an,am);am=ag(aj,am);}return ai.concat(am);}function ac(ak){var al=[],aj=0,ai=ak.length;for(;aj<ai;aj++){P(al,a(ak[aj]));}return al;}function ag(al,aj){for(var ai=0,ak=aj.length;ai<ak;ai++){if(aj[ai].id==al){return[aj[ai]];}}return[];}function ah(al,ak){var an=[],ai=0;for(var aj=0,am=ak.length;aj<am;aj++){if(ak[aj].tagName==al.toUpperCase()||ak[aj].tagName==al){an[ai++]=ak[aj];}}return an;}function af(al,ak){var an=[],ai=0;for(var aj=0,am=ak.length;aj<am;aj++){if((" "+ak[aj].className+" ").indexOf(" "+al+" ")!=-1){an[ai++]=ak[aj];}}return an;}function aa(ao,ak){var al;var an=[];var am=ao.split(",");for(var aj=0,ai=am.length;aj<ai;aj++){al=ab(q.lang.trim(am[aj]));an=an.concat(ae(al,ak));}return an;}function r(aj,al){aj=aj.length?aj:[aj];var am=[];var ai;for(var ak=0;aj[ak];ak++){ai=q.dom.get(aj[ak]);for(var an=0;al[an];an++){if(ai.isWithin(al[an])){am[am.length]=ai[0];break;}}}return am;}return function(al){if(!this.length){return this;}var ak=[];for(var aj=0,ai=arguments.length;aj<ai;aj++){if(typeof arguments[aj]=="string"){ak=ak.concat(aa(arguments[aj],this));}else{ak=ak.concat(r(arguments[aj],this));}}return q.dom.get(c(ak));};}()};H=T.create('<u class="glow-placeholder"></u>');q.dom=T;}});(window.gloader||glow).module({name:"glow.events",library:["glow","1.5.1"],depends:[["glow","1.5.1","glow.dom"]],builder:function(m){var h=m.dom.get;var z={};var u=1;var k=1;var l={};var a={};var n={};var j="__eventId"+m.UID;var e=j+"PreventDefault";var s=j+"StopPropagation";var B={};var d=1;var y={};var w={};var D=1;var b=2;var p=4;var f={TAB:"\t",SPACE:" ",ENTER:"\n",BACKTICK:"`"};var H={"96":223};var q={CAPSLOCK:20,NUMLOCK:144,SCROLLLOCK:145,BREAK:19,BACKTICK:223,BACKSPACE:8,PRINTSCREEN:44,MENU:93,SPACE:32,SHIFT:16,CTRL:17,ALT:18,ESC:27,TAB:9,META:91,RIGHTMETA:92,ENTER:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,INS:45,HOME:36,PAGEUP:33,DEL:46,END:35,PAGEDOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40};var F={};for(var E in q){F[""+q[E]]=E;}var v="0123456789=;'\\/#,.-";function A(L){var K=w[L];if(!K){return false;}var J=y[K];if(!J){return false;}for(var I=0,r=J.length;I<r;I++){if(J[I][0]==L){J.splice(I,1);return true;}}return false;}function x(i){B[i]=z.addListener(document,"key"+i,function(N){var L=0;if(N.ctrlKey){L+=D;}if(N.altKey){L+=b;}if(N.shiftKey){L+=p;}var M=N.chr?N.chr.toLowerCase():N.key?N.key.toLowerCase():N.keyCode;var J=L+":"+M+":"+i;var K=y[J]?y[J].slice(0):[];if(N.shiftKey){var O=(L&~p)+":"+M+":"+i;if(y[O]){for(var I=0,r=y[O].length;I<r;I++){K[K.length]=y[O][I];}}}if(!K){return;}for(var I=0,r=K.length;I<r;I++){if(K[I][2].call(K[I][3]||this,N)===false){N.preventDefault();}}return !N.defaultPrevented();});}function t(){var i;for(i in a){z.removeListener(i);}}var o;var G,c;function C(J,I){var i;if(m.env.opera){if(I.toLowerCase()=="resize"&&!G&&J==window){G=z.addListener(window.document.body,"resize",function(M){z.fire(window,"resize",M);});}else{if(I.toLowerCase()=="scroll"&&!c&&J==window){c=z.addListener(window.document,"scroll",function(M){z.fire(window,"scroll",M);});}}}var L=function(O){if(!O){O=window.event;}var N=new z.Event(),M=I.toLowerCase();N.nativeEvent=O;N.source=O.target||O.srcElement;N.relatedTarget=O.relatedTarget||(M=="mouseover"?O.fromElement:O.toElement);N.button=m.env.ie?(O.button&1?0:O.button&2?2:1):O.button;if(O.pageX||O.pageY){N.pageX=O.pageX;N.pageY=O.pageY;}else{if(O.clientX||O.clientY){N.pageX=O.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;N.pageY=O.clientY+document.body.scrollTop+document.documentElement.scrollTop;}}if(M=="mousewheel"){N.wheelDelta=O.wheelDelta?O.wheelDelta/120:O.detail?-O.detail/3:0;if(N.wheelDelta==0){return;}}if(M.indexOf("key")!=-1){N.altKey=!!O.altKey;N.ctrlKey=!!O.ctrlKey;N.shiftKey=!!O.shiftKey;if(I=="keydown"){o=O.keyCode;}N.charCode=O.keyCode&&O.charCode!==0?undefined:O.charCode;if(M=="keypress"){if(typeof(N.charCode)=="undefined"){N.charCode=O.keyCode;}if(m.env.opera&&N.charCode&&N.charCode==o&&v.indexOf(String.fromCharCode(N.charCode))==-1){N.charCode=undefined;N.keyCode=o;}}if(N.charCode&&N.charCode<=49){N.charCode=undefined;}if(N.charCode){N.chr=String.fromCharCode(N.charCode);}else{if(O.keyCode){N.charCode=undefined;N.keyCode=H[O.keyCode.toString()]||O.keyCode;N.key=F[N.keyCode];if(f[N.key]){N.chr=f[N.key];N.charCode=N.chr.charCodeAt(0);}}}if(N.chr){N.capsLock=N.chr.toUpperCase()!=N.chr?N.shiftKey:N.chr.toLowerCase()!=N.chr?!N.shiftKey:undefined;}}z.fire(this,I,N);if(N.defaultPrevented()){return false;}};if(J.addEventListener&&(!m.env.webkit||m.env.webkit>418)){J.addEventListener(I.toLowerCase()=="mousewheel"&&m.env.gecko?"DOMMouseScroll":I,L,false);}else{var r="on"+I;var K=J[r];if(K){J[r]=function(){var M=K.apply(this,arguments),N=L.apply(this,arguments);return(M!==false)&&(N!==false);};}else{J[r]=L;}}J=null;}z._copyListeners=function(O,N){var J=O.length,M,r,I,L,K;while(J--){if(O[J][j]){M=l[O[J][j]];for(r in M){I=0;L=M[r].length;for(;I<L;I++){K=M[r][I];z.addListener(N[J],r,K[2],K[3]);}}}}};z.addListener=function(P,J,R,L){if(!P){throw"no attachTo paramter passed to addListener";}if(typeof P=="string"){if(!m.dom){throw"glow.dom must be loaded to use a selector as the first argument to glow.events.addListener";}P=h(P);}if(m.dom&&P instanceof m.dom.NodeList){var Q=[],O=P.length;while(O--){Q[O]=z.addListener(P[O],J,R,L);}return Q;}var K;if(!(K=P[j])){K=P[j]=k++;}var N=u++;var M=[K,J,R,L,N];a[N]=M;var r=l[K];if(!r){r=l[K]={};}var I=r[J];if(!I){I=r[J]=[];}I[I.length]=M;if((P.addEventListener||P.attachEvent)&&!n[K+":"+J]){C(P,J);n[K+":"+J]=true;}return N;};z.removeListener=function(L){if(L&&L.toString().indexOf("k:")!=-1){return A(L);}if(L instanceof Array){var I=L.length;while(I--){z.removeListener(L[I]);}return true;}var K=a[L];if(!K){return false;}delete a[L];var J=l[K[0]][K[1]];for(var I=0,r=J.length;I<r;I++){if(J[I]==K){J.splice(I,1);break;}}if(!J.length){delete l[K[0]][K[1]];}var M=false;for(var I in l[K[0]]){M=true;break;}if(!M){delete l[K[0]];}return true;};z.removeAllListeners=function(N){var K,J,M=[],L=0,r,I;if(typeof N=="string"){N=h(N);}if(N instanceof Array||N instanceof m.dom.NodeList){K=N.length;while(K--){z.removeAllListeners(N[K]);}return z;}J=N[j];if(!J){return z;}I=l[J];for(r in I){K=I[r].length;while(K--){M[L++]=I[r][K][4];}}if(M.length){z.removeListener(M);}return z;};z.fire=function(P,I,O){if(!P){throw"glow.events.fire: required parameter attachedTo not passed (name: "+I+")";}if(!I){throw"glow.events.fire: required parameter name not passed";}if(!O){O=new z.Event();}if(O.constructor===Object){O=new z.Event(O);}O.type=I;O.attachedTo=P;if(!O.source){O.source=P;}var J,r,K=r&&r[I];(J=P[j])&&(r=l[J])&&(K=r[I]);if(!K){return O;}var L;var Q=K.slice(0);for(var M=0,N=Q.length;M<N;M++){L=Q[M];if(L[2].call(L[3]||P,O)===false){O.preventDefault();}}return O;};var g=/^((?:(?:ctrl|alt|shift)\+)*)(?:(\w+|.)|[\n\r])$/i;z.addKeyListener=function(M,L,N,r){L.replace(/^key/i,"");L=L.toLowerCase();if(!(L=="press"||L=="down"||L=="up")){throw"event type must be press, down or up";}if(!B[L]){x(L);}var J=M.match(g),O=0,P;if(!J){throw"key format not recognised";}if(J[1].toLowerCase().indexOf("ctrl")!=-1){O+=D;}if(J[1].toLowerCase().indexOf("alt")!=-1){O+=b;}if(J[1].toLowerCase().indexOf("shift")!=-1){O+=p;}var i=O+":"+(J[2]?J[2].toLowerCase():"\n")+":"+L;var I="k:"+d++;w[I]=i;var K=y[i];if(!K){K=y[i]=[];}K[K.length]=[I,L,N,r];return I;};z.Event=function(i){if(i){m.lang.apply(this,i);}};z.Event.prototype.preventDefault=function(){if(this[e]){return;}this[e]=true;if(this.nativeEvent&&this.nativeEvent.preventDefault){this.nativeEvent.preventDefault();this.nativeEvent.returnValue=false;}};z.Event.prototype.defaultPrevented=function(){return !!this[e];};z.Event.prototype.stopPropagation=function(){if(this[s]){return;}this[s]=true;var i=this.nativeEvent;if(i){i.cancelBubble=true;if(i.stopPropagation){i.stopPropagation();}}};z.Event.prototype.propagationStopped=function(){return !!this[s];};z.addListener(window,"unload",t);m.events=z;}});(window.gloader||glow).module({name:"glow.data",library:["glow","1.5.1"],depends:[["glow","1.5.1","glow.dom"]],builder:function(glow){var TYPES={UNDEFINED:"undefined",OBJECT:"object",NUMBER:"number",BOOLEAN:"boolean",STRING:"string",ARRAY:"array",FUNCTION:"function",NULL:"null"};var TEXT={AT:"@",EQ:"=",DOT:".",EMPTY:"",AND:"&",OPEN:"(",CLOSE:")"};var JSON={HASH:{START:"{",END:"}",SHOW_KEYS:true},ARRAY:{START:"[",END:"]",SHOW_KEYS:false},DATA_SEPARATOR:",",KEY_SEPARATOR:":",KEY_DELIMITER:'"',STRING_DELIMITER:'"',SAFE_PT1:/^[\],:{}\s]*$/,SAFE_PT2:/\\./g,SAFE_PT3:/\"[^\"\\\n\r]*\"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,SAFE_PT4:/(?:^|:|,)(?:\s*\[)+/g};var SLASHES={TEST:/[\b\n\r\t\\\f\"]/g,B:{PLAIN:"\b",ESC:"\\b"},N:{PLAIN:"\n",ESC:"\\n"},R:{PLAIN:"\r",ESC:"\\r"},T:{PLAIN:"\t",ESC:"\\t"},F:{PLAIN:"\f",ESC:"\\f"},SL:{PLAIN:"\\",ESC:"\\\\"},QU:{PLAIN:'"',ESC:'\\"'}};function _replaceSlashes(s){switch(s){case SLASHES.B.PLAIN:return SLASHES.B.ESC;case SLASHES.N.PLAIN:return SLASHES.N.ESC;case SLASHES.R.PLAIN:return SLASHES.R.ESC;case SLASHES.T.PLAIN:return SLASHES.T.ESC;case SLASHES.F.PLAIN:return SLASHES.F.ESC;case SLASHES.SL.PLAIN:return SLASHES.SL.ESC;case SLASHES.QU.PLAIN:return SLASHES.QU.ESC;default:return s;}}function _getType(object){if((typeof object)==TYPES.OBJECT){if(object==null){return TYPES.NULL;}else{return(object instanceof Array)?TYPES.ARRAY:TYPES.OBJECT;}}else{return(typeof object);}}glow.data={encodeUrl:function(object){var objectType=_getType(object);var paramsList=[];var listLength=0;if(objectType!=TYPES.OBJECT){throw new Error("glow.data.encodeUrl: cannot encode item");}else{for(var key in object){switch(_getType(object[key])){case TYPES.FUNCTION:case TYPES.OBJECT:throw new Error("glow.data.encodeUrl: cannot encode item");break;case TYPES.ARRAY:for(var i=0,l=object[key].length;i<l;i++){switch(_getType(object[key])[i]){case TYPES.FUNCTION:case TYPES.OBJECT:case TYPES.ARRAY:throw new Error("glow.data.encodeUrl: cannot encode item");break;default:paramsList[listLength++]=key+TEXT.EQ+encodeURIComponent(object[key][i]);}}break;default:paramsList[listLength++]=key+TEXT.EQ+encodeURIComponent(object[key]);}}return paramsList.join(TEXT.AND);}},decodeUrl:function(text){if(_getType(text)!=TYPES.STRING){throw new Error("glow.data.decodeUrl: cannot decode item");}else{if(text===""){return{};}}var result={};var keyValues=text.split(TEXT.AND);var thisPair,key,value;for(var i=0,l=keyValues.length;i<l;i++){thisPair=keyValues[i].split(TEXT.EQ);if(thisPair.length!=2){throw new Error("glow.data.decodeUrl: cannot decode item");}else{key=decodeURIComponent(thisPair[0]);value=decodeURIComponent(thisPair[1]);switch(_getType(result[key])){case TYPES.ARRAY:result[key][result[key].length]=value;break;case TYPES.UNDEFINED:result[key]=value;break;default:result[key]=[result[key],value];}}}return result;},encodeJson:function(object,options){function _encode(object,options){if(_getType(object)==TYPES.ARRAY){var type=JSON.ARRAY;}else{var type=JSON.HASH;}var serial=[type.START];var len=1;var dataType;var notFirst=false;for(var key in object){dataType=_getType(object[key]);if(dataType!=TYPES.UNDEFINED){if(notFirst){serial[len++]=JSON.DATA_SEPARATOR;}notFirst=true;if(type.SHOW_KEYS){serial[len++]=JSON.KEY_DELIMITER;serial[len++]=key;serial[len++]=JSON.KEY_DELIMITER;serial[len++]=JSON.KEY_SEPARATOR;}switch(dataType){case TYPES.FUNCTION:throw new Error("glow.data.encodeJson: cannot encode item");break;case TYPES.STRING:default:serial[len++]=JSON.STRING_DELIMITER;serial[len++]=glow.lang.replace(object[key],SLASHES.TEST,_replaceSlashes);serial[len++]=JSON.STRING_DELIMITER;break;case TYPES.NUMBER:case TYPES.BOOLEAN:serial[len++]=object[key];break;case TYPES.OBJECT:case TYPES.ARRAY:serial[len++]=_encode(object[key],options);break;case TYPES.NULL:serial[len++]=TYPES.NULL;break;}}}serial[len++]=type.END;return serial.join(TEXT.EMPTY);}options=options||{};var type=_getType(object);if((type==TYPES.OBJECT)||(type==TYPES.ARRAY)){return _encode(object,options);}else{throw new Error("glow.data.encodeJson: cannot encode item");}},decodeJson:function(text,options){if(_getType(text)!=TYPES.STRING){throw new Error("glow.data.decodeJson: cannot decode item");}options=options||{};options.safeMode=options.safeMode||false;var canEval=true;if(options.safeMode){canEval=(JSON.SAFE_PT1.test(text.replace(JSON.SAFE_PT2,TEXT.AT).replace(JSON.SAFE_PT3,JSON.ARRAY.END).replace(JSON.SAFE_PT4,TEXT.EMPTY)));}if(canEval){try{return eval(TEXT.OPEN+text+TEXT.CLOSE);}catch(e){}}throw new Error("glow.data.decodeJson: cannot decode item");},escapeHTML:function(html){return glow.dom.create("<div></div>").text(html).html();}};}});(window.gloader||glow).module({name:"glow.net",library:["glow","1.5.1"],depends:[["glow","1.5.1","glow.data","glow.events"]],builder:function(j){var d={XML_ERR:"Cannot get response as XML, check the mime type of the data",POST_DEFAULT_CONTENT_TYPE:"application/x-www-form-urlencoded;"},e=[],k="c",l="_"+j.UID+"loadScriptCbs",n=j.events,i=function(){};function o(){if(window.ActiveXObject){return(o=function(){return new ActiveXObject("MSXML2.XMLHTTP");})();}else{return(o=function(){return new XMLHttpRequest();})();}}function g(p){return j.lang.apply({onLoad:i,onError:i,onAbort:i,headers:{},async:true,useCache:false,data:null,defer:false},p||{});}function m(p){return[p,(/\?/.test(p)?"&":"?"),"a",new Date().getTime(),parseInt(Math.random()*100000)].join("");}function h(w,p,t){var s=o(),u=t.data&&(typeof t.data=="string"?t.data:j.data.encodeUrl(t.data)),q,r=new c(s,t);if(!t.useCache){p=m(p);}s.open(w,p,t.async);for(q in t.headers){s.setRequestHeader(q,t.headers[q]);}function v(){r.send=i;if(t.async){if(t.timeout){r._timeout=setTimeout(function(){f(r);var y=new b(s,true);n.fire(r,"error",y);},t.timeout*1000);}s.onreadystatechange=function(){if(s.readyState==4){r._timeout&&clearTimeout(r._timeout);r.completed=true;var y=new b(s);if(y.wasSuccessful){n.fire(r,"load",y);}else{n.fire(r,"error",y);}}};s.send(u);return r;}else{s.send(u);r.completed=true;var x=new b(s);if(x.wasSuccessful){n.fire(r,"load",x);}else{n.fire(r,"error",x);}return x;}}r.send=v;return t.defer?r:v();}var a={};a.get=function(p,q){q=g(q);return h("GET",p,q);};a.post=function(p,q,r){r=g(r);r.data=q;if(!r.headers["Content-Type"]){r.headers["Content-Type"]=d.POST_DEFAULT_CONTENT_TYPE;}return h("POST",p,r);};a.loadScript=function(q,t){var r=e.length,p,u=k+r,t=g(t),s=new c(r,t),q=t.useCache?q:m(q),v=window[l]||(window[l]={});if(t.onLoad){v[u]=function(){s._timeout&&clearTimeout(s._timeout);s.completed=true;t.onLoad.apply(this,arguments);j.dom.get(p).destroy();p=e[r]=v[u]=undefined;delete v[u];delete e[r];};q=j.lang.interpolate(q,{callback:l+"."+u});}p=e[r]=document.createElement("script");if(t.charset){p.charset=t.charset;}n.addListener(s,"abort",t.onAbort);j.ready(function(){if(t.timeout){s._timeout=setTimeout(function(){f(s);t.onError();},t.timeout*1000);}if(j.env.opera){setTimeout(function(){if(p){p.src=q;}},0);}else{p.src=q;}document.body.appendChild(p);});return s;};function f(q){var p=q.nativeRequest,r=q._callbackIndex;q._timeout&&clearTimeout(q._timeout);if(p){p.onreadystatechange=i;p.abort();}else{if(r){window[l][k+r]=i;j.dom.get(e[r]).destroy();}}}function c(s,q){this._timeout=null;this.complete=false;if(typeof s=="number"){this._callbackIndex=s;}else{this.nativeRequest=s;}var r=["Load","Error","Abort"],p=0;for(;p<3;p++){n.addListener(this,r[p].toLowerCase(),q["on"+r[p]]);}}c.prototype={send:function(){},abort:function(){if(!this.completed&&!n.fire(this,"abort").defaultPrevented()){f(this);}return this;}};function b(q,p){n.Event.call(this);this.nativeResponse=q;this.status=p?408:q.status==1223?204:q.status;this.timedOut=!!p;this.wasSuccessful=(this.status>=200&&this.status<300)||this.status==304||(this.status==0&&q.responseText);}j.lang.extend(b,n.Event,{text:function(){return this.nativeResponse.responseText;},xml:function(){if(!this.nativeResponse.responseXML){throw new Error(d.XML_ERR);}return this.nativeResponse.responseXML;},json:function(p){return j.data.decodeJson(this.text(),{safeMode:p});},header:function(p){return this.nativeResponse.getResponseHeader(p);},statusText:function(){return this.timedOut?"Request Timeout":this.nativeResponse.statusText;}});j.net=a;}});(window.gloader||glow).module({name:"glow.tweens",library:["glow","1.5.1"],depends:[],builder:function(b){function a(c){return function(d){return 1-c(1-d);};}b.tweens={linear:function(){return function(c){return c;};},easeIn:function(c){c=c||2;return function(d){return Math.pow(1,c-1)*Math.pow(d,c);};},easeOut:function(c){return a(this.easeIn(c));},easeBoth:function(c){return this.combine(this.easeIn(c),this.easeOut(c));},overshootIn:function(c){return a(this.overshootOut(c));},overshootOut:function(c){c=c||1.70158;return function(d){if(d==0||d==1){return d;}return((d-=1)*d*((c+1)*d+c)+1);};},overshootBoth:function(c){return this.combine(this.overshootIn(c),this.overshootOut(c));},bounceIn:function(){return a(this.bounceOut());},bounceOut:function(){return function(c){if(c<(1/2.75)){return 7.5625*c*c;}else{if(c<(2/2.75)){return(7.5625*(c-=(1.5/2.75))*c+0.75);}else{if(c<(2.5/2.75)){return(7.5625*(c-=(2.25/2.75))*c+0.9375);}else{return(7.5625*(c-=(2.625/2.75))*c+0.984375);}}}};},bounceBoth:function(){return this.combine(this.bounceIn(),this.bounceOut());},elasticIn:function(c,d){return a(this.elasticOut(c,d));},elasticOut:function(c,d){return function(e){if(e==0||e==1){return e;}if(!d){d=0.3;}if(!c||c<1){c=1;var f=d/4;}else{var f=d/(2*Math.PI)*Math.asin(1/c);}return c*Math.pow(2,-10*e)*Math.sin((e-f)*(2*Math.PI)/d)+1;};},elasticBoth:function(c,d){d=d||0.45;return this.combine(this.elasticIn(c,d),this.elasticOut(c,d));},combine:function(d,c){return function(e){if(e<0.5){return d(e*2)/2;}else{return c((e-0.5)*2)/2+0.5;}};}};}});(window.gloader||glow).module({name:"glow.anim",library:["glow","1.5.1"],depends:[["glow","1.5.1","glow.tweens","glow.events","glow.dom"]],builder:function(glow){var $=glow.dom.get,manager,events=glow.events,dom=glow.dom,get=dom.get,hasUnits=/width|height|top$|bottom$|left$|right$|spacing$|indent$|font-size/,noNegatives=/width|height|padding|opacity/,usesYAxis=/height|top/,getUnit=/(\D+)$/,testElement=dom.create('<div style="position:absolute;visibility:hidden"></div>');(function(){var queue=[],queueLen=0,intervalTime=1,interval;manager={addToQueue:function(anim){queue[queueLen++]=anim;anim._playing=true;anim._timeAnchor=anim._timeAnchor||new Date().valueOf();if(!interval){this.startInterval();}},removeFromQueue:function(anim){for(var i=0;i<queueLen;i++){if(queue[i]==anim){queue.splice(i,1);anim._timeAnchor=null;anim._playing=false;if(--queueLen==0){this.stopInterval();}return;}}},startInterval:function(){interval=window.setInterval(this.processQueue,intervalTime);},stopInterval:function(){window.clearInterval(interval);interval=null;},processQueue:function(){var anim,i,now=new Date().valueOf();for(i=0;i<queueLen;i++){anim=queue[i];if(anim.position==anim.duration){manager.removeFromQueue(anim);i--;events.fire(anim,"complete");if(anim._opts.destroyOnComplete){anim.destroy();}continue;}if(anim.useSeconds){anim.position=(now-anim._timeAnchor)/1000;if(anim.position>anim.duration){anim.position=anim.duration;}}else{anim.position++;}anim.value=anim.tween(anim.position/anim.duration);events.fire(anim,"frame");}}};})();function convertCssUnit(element,fromValue,toUnit,axis){var elmStyle=testElement[0].style,axisProp=(axis=="x")?"width":"height",startPixelValue,toUnitPixelValue;elmStyle.margin=elmStyle.padding=elmStyle.border="0";startPixelValue=testElement.css(axisProp,fromValue).insertAfter(element)[axisProp]();toUnitPixelValue=testElement.css(axisProp,10+toUnit)[axisProp]()/10;testElement.remove();return startPixelValue/toUnitPixelValue;}function keepWithinRange(num,start,end){if(start!==undefined&&num<start){return start;}if(end!==undefined&&num>end){return end;}return num;}function buildAnimFunction(element,spec){var cssProp,r=["a=(function(){"],rLen=1,fromUnit,unitDefault=[0,"px"],to,from,unit,a;for(cssProp in spec){r[rLen++]='element.css("'+cssProp+'", ';if(typeof spec[cssProp]!="object"){to=spec[cssProp];}else{to=spec[cssProp].to;}if((from=spec[cssProp].from)===undefined){if(cssProp=="font-size"||cssProp=="background-position"){throw new Error("From value must be set for "+cssProp);}from=element.css(cssProp);}if(hasUnits.test(cssProp)){unit=(getUnit.exec(to)||unitDefault)[1];fromUnit=(getUnit.exec(from)||unitDefault)[1];from=parseFloat(from)||0;to=parseFloat(to)||0;if(from&&unit!=fromUnit){if(cssProp=="font-size"){throw new Error("Units must be the same for font-size");}from=convertCssUnit(element,from+fromUnit,unit,usesYAxis.test(cssProp)?"y":"x");}if(noNegatives.test(cssProp)){r[rLen++]="keepWithinRange(("+(to-from)+" * this.value) + "+from+', 0) + "'+unit+'"';}else{r[rLen++]="("+(to-from)+" * this.value) + "+from+' + "'+unit+'"';}}else{if(!(isNaN(from)||isNaN(to))){from=Number(from);to=Number(to);r[rLen++]="("+(to-from)+" * this.value) + "+from;}else{if(cssProp.indexOf("color")!=-1){to=dom.parseCssColor(to);if(!glow.lang.hasOwnProperty(from,"r")){from=dom.parseCssColor(from);}r[rLen++]='"rgb(" + keepWithinRange(Math.round('+(to.r-from.r)+" * this.value + "+from.r+'), 0, 255) + "," + keepWithinRange(Math.round('+(to.g-from.g)+" * this.value + "+from.g+'), 0, 255) + "," + keepWithinRange(Math.round('+(to.b-from.b)+" * this.value + "+from.b+'), 0, 255) + ")"';}else{if(cssProp=="background-position"){var vals={},fromTo=["from","to"],unit=(getUnit.exec(from)||unitDefault)[1];vals.fromOrig=from.toString().split(/\s/);vals.toOrig=to.toString().split(/\s/);if(vals.fromOrig[1]===undefined){vals.fromOrig[1]="50%";}if(vals.toOrig[1]===undefined){vals.toOrig[1]="50%";}for(var i=0;i<2;i++){vals[fromTo[i]+"X"]=parseFloat(vals[fromTo[i]+"Orig"][0]);vals[fromTo[i]+"Y"]=parseFloat(vals[fromTo[i]+"Orig"][1]);vals[fromTo[i]+"XUnit"]=(getUnit.exec(vals[fromTo[i]+"Orig"][0])||unitDefault)[1];vals[fromTo[i]+"YUnit"]=(getUnit.exec(vals[fromTo[i]+"Orig"][1])||unitDefault)[1];}if((vals.fromXUnit!==vals.toXUnit)||(vals.fromYUnit!==vals.toYUnit)){throw new Error("Mismatched axis units cannot be used for "+cssProp);}r[rLen++]="("+(vals.toX-vals.fromX)+" * this.value + "+vals.fromX+') + "'+vals.fromXUnit+' " + ('+(vals.toY-vals.fromY)+" * this.value + "+vals.fromY+') + "'+vals.fromYUnit+'"';}}}}r[rLen++]=");";}r[rLen++]="})";return eval(r.join(""));}var r={};r.css=function(element,duration,spec,opts){element=get(element);var anim=new r.Animation(duration,opts);if(element[0]){events.addListener(anim,"frame",buildAnimFunction(element,spec));}return anim;};slideElement=function slideElement(element,duration,action,opts){duration=duration||0.5;element=$(element);opts=glow.lang.apply({tween:glow.tweens.easeBoth(),onStart:function(){},onComplete:function(){}},opts);var i=0,thatlength=element.length,completeHeight,fromHeight,channels=[],timeline;for(;i<thatlength;i++){if(action=="up"||(action=="toggle"&&element.slice(i,i+1).height()>0)){element[i].style.overflow="hidden";if(glow.env.ie<8){element[i].style.zoom=1;}completeHeight=0;fromHeight=element.slice(i,i+1).height();}else{if(action=="down"||(action="toggle"&&element.slice(i,i+1).height()==0)){fromHeight=element.slice(i,i+1).height();element[i].style.height="auto";completeHeight=element.slice(i,i+1).height();element[i].style.height=fromHeight+"px";}}channels[i]=[glow.anim.css(element[i],duration,{height:{from:fromHeight,to:completeHeight}},{tween:opts.tween})];}timeline=new glow.anim.Timeline(channels);events.addListener(timeline,"complete",function(){element.each(function(){if(this.style.height!="0px"){this.style.height="auto";}});});events.addListener(timeline,"start",opts.onStart);events.addListener(timeline,"complete",opts.onComplete);return timeline.start();};r.slideDown=function(element,duration,opts){return slideElement(element,duration,"down",opts);};r.slideUp=function(element,duration,opts){return slideElement(element,duration,"up",opts);};r.slideToggle=function(element,duration,opts){return slideElement(element,duration,"toggle",opts);};r.fadeOut=function(element,duration,opts){return r.fadeTo(element,0,duration,opts);};r.fadeIn=function(element,duration,opts){r.fadeTo(element,1,duration,opts);};r.fadeTo=function(element,opacity,duration,opts){duration=duration||0.5;element=$(element);opts=glow.lang.apply({tween:glow.tweens.easeBoth(),onStart:function(){},onComplete:function(){}},opts);var i=0,thatlength=element.length,channels=[],timeline;for(;i<thatlength;i++){channels[i]=[glow.anim.css(element[i],duration,{opacity:opacity},{tween:opts.tween})];}timeline=new glow.anim.Timeline(channels);events.addListener(timeline,"start",opts.onStart);events.addListener(timeline,"complete",opts.onComplete);return timeline.start();};r.highlight=function(element,highlightColour,duration,opts){element=$(element);duration=duration||1;highlightColour=highlightColour||"#ffff99";opts=glow.lang.apply({tween:glow.tweens.easeBoth(),onStart:function(){},onComplete:function(){}},opts);var i=0,transArray=[],elmsLength=element.length,completeColour,channels=[],timeline;for(;i<elmsLength;i++){completeColour=opts.completeColour||element.slice(i,i+1).css("background-color");if(completeColour=="transparent"||completeColour==""){completeColour="#fff";}channels[i]=[r.css(element[i],duration,{"background-color":{from:highlightColour,to:completeColour}},{tween:opts.tween})];}timeline=new glow.anim.Timeline(channels);events.addListener(timeline,"start",opts.onStart);events.addListener(timeline,"complete",opts.onComplete);return timeline.start();};r.Animation=function(duration,opts){this._opts=opts=glow.lang.apply({useSeconds:true,tween:glow.tweens.linear(),destroyOnComplete:false},opts);this._playing=false;this._timeAnchor=null;this.duration=duration;this.useSeconds=opts.useSeconds;this.tween=opts.tween;this.position=0;this.value=0;};r.Animation.prototype={start:function(){if(this._playing){this.stop();}var e=events.fire(this,"start");if(e.defaultPrevented()){return this;}this._timeAnchor=null;this.position=0;manager.addToQueue(this);return this;},stop:function(){if(this._playing){var e=events.fire(this,"stop");if(e.defaultPrevented()){return this;}manager.removeFromQueue(this);}return this;},destroy:function(){this.stop();events.removeAllListeners(this);return this;},resume:function(){if(!this._playing){var e=events.fire(this,"resume");if(e.defaultPrevented()){return this;}this._timeAnchor=new Date().valueOf()-(this.position*1000);manager.addToQueue(this);}return this;},isPlaying:function(){return this._playing;},goTo:function(pos){this._timeAnchor=new Date().valueOf()-((this.position=pos)*1000);this.value=this.tween(this.duration&&this.position/this.duration);events.fire(this,"frame");return this;}};r.Timeline=function(channels,opts){this._opts=opts=glow.lang.apply({loop:false,destroyOnComplete:false},opts);this._channels=(channels[0]&&channels[0].push)?channels:[channels];this._channelPos=[];this._playing=false;this.loop=opts.loop;var i,j,iLen,jLen,channel,allChannels=this._channels,totalDuration=0,channelDuration;for(i=0,iLen=allChannels.length;i<iLen;i++){channel=allChannels[i];channelDuration=0;for(j=0,jLen=channel.length;j<jLen;j++){if(typeof channel[j]=="number"){channel[j]=new r.Animation(channel[j]);}if(channel[j] instanceof r.Animation){if(!channel[j].useSeconds){throw new Error("Timelined animations must be timed in seconds");}channel[j]._timelineOffset=channelDuration*1000;channelDuration+=channel[j].duration;channel[j]._channelIndex=i;}}this.duration=totalDuration=Math.max(channelDuration,totalDuration);}this._controlAnim=new r.Animation(totalDuration);events.addListener(this._controlAnim,"frame",this._processFrame,this);events.addListener(this._controlAnim,"complete",this._complete,this);};r.Timeline.prototype={_advanceChannel:function(i){var currentAnim=this._channels[i][this._channelPos[i]],nextAnim=this._channels[i][++this._channelPos[i]];if(currentAnim&&currentAnim._playing){currentAnim._playing=false;events.fire(currentAnim,"complete");if(currentAnim._opts.destroyOnComplete){currentAnim.destroy();}}if((nextAnim)!==undefined){if(typeof nextAnim=="function"){nextAnim();this._advanceChannel(i);}else{nextAnim.position=0;nextAnim._channelIndex=i;events.fire(nextAnim,"start");nextAnim._playing=true;}}},_complete:function(){if(this.loop){this.start();return;}this._playing=false;events.fire(this,"complete");if(this._opts.destroyOnComplete){this.destroy();}},_processFrame:function(){var i,len,anim,controlAnim=this._controlAnim,msFromStart=(new Date().valueOf())-controlAnim._timeAnchor;for(i=0,len=this._channels.length;i<len;i++){if(!(anim=this._channels[i][this._channelPos[i]])){continue;}anim.position=(msFromStart-anim._timelineOffset)/1000;if(anim.position>anim.duration){anim.position=anim.duration;}anim.value=anim.tween(anim.position/anim.duration);events.fire(anim,"frame");if(anim.position==anim.duration){this._advanceChannel(i);}}},start:function(){var e=events.fire(this,"start");if(e.defaultPrevented()){return this;}var i,iLen,j,jLen,anim;this._playing=true;for(i=0,iLen=this._channels.length;i<iLen;i++){this._channelPos[i]=-1;this._advanceChannel(i);for(j=this._channels[i].length;j;j--){anim=this._channels[i][j];if(anim instanceof r.Animation){anim.goTo(0);}}}this._controlAnim.start();return this;},stop:function(){if(this._playing){var e=events.fire(this,"stop");if(e.defaultPrevented()){return this;}this._playing=false;var anim;for(var i=0,len=this._channels.length;i<len;i++){anim=this._channels[i][this._channelPos[i]];if(anim instanceof r.Animation&&anim._playing){events.fire(anim,"stop");anim._playing=false;}}this._controlAnim.stop();}return this;},destroy:function(){var i,j;this.stop();events.removeAllListeners(this);this._controlAnim.destroy();i=this._channels.length;while(i--){j=this._channels[i].length;while(j--){this._channels[i][j].destroy();}}return this;},resume:function(){if(!this._playing){var e=events.fire(this,"resume");if(e.defaultPrevented()){return this;}this._playing=true;var anim;for(var i=0,len=this._channels.length;i<len;i++){anim=this._channels[i][this._channelPos[i]];if(anim instanceof r.Animation&&!anim._playing){events.fire(anim,"resume");anim._playing=true;}}this._controlAnim.resume();}return this;},isPlaying:function(){return this._playing;},goTo:function(pos){var i,j,k,channelsLen=this._channels.length,channelLen,anim,runningDuration;if(typeof pos=="number"){if(pos>this.duration){if(this.loop){pos=pos%this.duration;}else{pos=this.duration;}}this._controlAnim.goTo(pos);for(i=0;i<channelsLen;i++){runningDuration=0;for(j=0,channelLen=this._channels[i].length;j<channelLen;j++){anim=this._channels[i][j];if(anim instanceof r.Animation){if((runningDuration+anim.duration)>pos){this._channelPos[i]=j;anim.goTo(pos-runningDuration);break;}anim.goTo(anim.duration);runningDuration+=anim.duration;}}for(k=channelLen;k>j;k--){anim.goTo(0);}}}else{for(i=0;i<channelsLen;i++){runningDuration=0;for(j=0,channelLen=this._channels[i].length;j<channelLen;j++){anim=this._channels[i][j];if(anim===pos){return this.goTo(runningDuration);}if(anim instanceof r.Animation){runningDuration+=anim.duration;}}}throw"Animation not found in animation channels";}return this;}};glow.anim=r;}});(window.gloader||glow).module({name:"glow.forms",library:["glow","1.5.1"],depends:[["glow","1.5.1","glow.dom","glow.events","glow.anim","glow.net"]],builder:function(b){b.forms={};b.forms.Form=function(e,d){this.formNode=b.dom.get(e);if(!this.formNode[0]){throw"Could not find form. Possibly run before DOM ready.";}this._fields=[];this._result=null;this.opts=d||{};b.events.addListener(this,"validate",this.opts.onValidate||a.defaultFeedback);this._idleTimer=null;var c=this;b.events.addListener(this.formNode,"submit",function(){c.validate("submit");return false;});};b.forms.Form.prototype.validate=function(c,d){this.eventName=c||"submit";this._result=new b.forms.ValidateResult(this.eventName);this._result.form=this;this._fieldCur=0;this._testCur=-1;this._fieldName=d;this._nextTest();};b.forms.Form.prototype._nextTest=function(){this._testCur++;if(this._testCur>=this._fields[this._fieldCur]._tests.length){if(!this._nextField()){return false;}}var d=this._fields[this._fieldCur]._tests[this._testCur];var c;if(d.opts.field){c=this.formNode.val()[d.opts.field]||"";d.isConditional=true;}else{c=this.formNode.val()[this._fields[this._fieldCur].name]||"";}if(!c.join){c=[c];}var e=function(f){return function(){f._onTestResult.apply(f,arguments);};}(this);d.opts.on=d.opts.on||"submit";if(this._result.eventName&&(" "+d.opts.on+" ").indexOf(" "+this._result.eventName+" ")!=-1){if(this._fieldName&&this._fieldName!=d.name){this._nextTest();return;}if(typeof b.forms.tests[d.type]!="function"){throw"Unimplemented test: no test exists of type '"+d.type+"'.";}b.forms.tests[d.type](c,d.opts,e,this.formNode.val());}else{this._nextTest();}};b.forms.Form.prototype._nextField=function(){this._fieldCur++;this._testCur=0;if(this._fieldCur>=this._fields.length){this._fieldCur=0;b.events.fire(this,"validate",this._result);if(this.eventName=="submit"&&this._result&&!this._result.defaultPrevented()){this.formNode[0].submit();}return false;}return true;};b.forms.Form.prototype._onTestResult=function(c,d){if(typeof c=="boolean"){c=(c)?b.forms.PASS:b.forms.FAIL;}if(this._fields[this._fieldCur]._tests[this._testCur].isConditional&&c===b.forms.FAIL){c=b.forms.SKIP;}this._result.fields.push({name:this._fields[this._fieldCur].name,result:c,message:d});if(c!==b.forms.PASS){if(c===b.forms.FAIL){this._result.errorCount++;}this._testCur=this._fields[this._fieldCur]._tests.length;}this._nextTest();};b.forms.Form.prototype.addTests=function(m){var l={name:m,_tests:[]};var d=function(i){return function(){i.validate.apply(i,["change",m]);};}(this);var h=function(i){return function(){i.validate.apply(i,["click",m]);};}(this);var j=function(i){return function(){i.validate.apply(i,["idle",m]);};}(this);for(var f=1;f<arguments.length;f++){var e=arguments[f][0];var k=(arguments[f].length>1)?arguments[f][1]:{};l._tests.push({name:m,type:e,opts:k});if(!d.added&&(" "+k.on+" ").indexOf(" change ")!=-1){var g=this.formNode.get("*").each(function(n){if(this.name==m){b.events.addListener(this,"change",d);d.added=true;}});}if(!h.added&&(" "+k.on+" ").indexOf(" click ")!=-1){var g=this.formNode.get("*").each(function(n){if(this.name==m){b.events.addListener(this,"click",h);h.added=true;}});}if(!j.added&&(" "+k.on+" ").indexOf(" idle ")!=-1){var c=(typeof k.delay!="undefined")?parseInt(k.delay):1000;var g=this.formNode.get("*").each(function(n){if(this.name==m){b.events.addListener(this,"keyup",function(i){return function(){window.clearTimeout(this.idleTimeoutID);if(this.value){this.idleTimeoutID=window.setTimeout(j,i);}};}(c));b.events.addListener(this,"blur",function(){window.clearTimeout(this.idleTimeoutID);});j.added=true;}});}}this._fields.push(l);return this;};b.forms.ValidateResult=function(c){b.events.Event.apply(this);this.eventName=c;this.errorCount=0;this.value=undefined;this.fields=[];};b.lang.extend(b.forms.ValidateResult,b.events.Event);b.forms.PASS=1;b.forms.FAIL=0;b.forms.SKIP=-1;b.forms.tests={required:function(d,g,h){var f=g.message||"Value is required";for(var e=0,c=d.length;e<c;e++){if(/^\s*$/.test(d[e])){h(b.forms.FAIL,f);return;}}h(b.forms.PASS,f);},isNumber:function(d,g,h){var f=g.message||"Must be a number.";for(var e=0,c=d.length;e<c;e++){if(d[e]==""||isNaN(d[e])){h(b.forms.FAIL,f);return;}}h(b.forms.PASS,f);},min:function(d,g,h){var f=g.message||"The value must be at least "+g.arg+".";for(var e=0,c=d.length;e<c;e++){if(Number(d[e])<Number(g.arg)){h(b.forms.FAIL,f);return;}}h(b.forms.PASS,f);},max:function(d,g,h){var f=g.message||"The value must be less than "+g.arg+".";for(var e=0,c=d.length;e<c;e++){if(Number(d[e])>Number(g.arg)){h(b.forms.FAIL,f);return;}}h(b.forms.PASS,f);},range:function(e,j,k){var h=j.arg.split("..");if(typeof h[0]=="undefined"||typeof h[1]=="undefined"){throw"Range test requires a parameter like 0..10.";}var g=j.message||"The value must be "+h[0]+" or greater, and less than "+h[1]+".";h[0]*=1;h[1]*=1;if(h[0]>h[1]){var d=h[0];h[0]=h[1];h[1]=d;}for(var f=0,c=e.length;f<c;f++){if(e[f]<h[0]||e[f]>h[1]){k(b.forms.FAIL,g);return;}}k(b.forms.PASS,g);},minCount:function(c,g,h){var f=g.message||"Must be have at least "+g.arg+" values.";var e=0;for(var d=0;d<c.length;d++){if(c[d]!=""){e++;}}if(e<g.arg){h(b.forms.FAIL,f);return;}h(b.forms.PASS,f);},maxCount:function(c,g,h){var f=g.message||"Must be have at most "+g.arg+" values.";var e=0;for(var d=0;d<c.length;d++){if(c[d]!=""){e++;}}if(e>g.arg){h(b.forms.FAIL,f);return;}h(b.forms.PASS,f);},count:function(c,g,h){var f=g.message||"Must have "+g.arg+" values.";var e=0;for(var d=0;d<c.length;d++){if(c[d]!=""){e++;}}if(e!=g.arg){h(b.forms.FAIL,f);return;}h(b.forms.PASS,f);},regex:function(d,h,j){var g=h.message||"Must be in the correct format.";var f=(typeof h.arg=="string")?new RegExp(h.arg):h.arg;for(var e=0,c=d.length;e<c;e++){if(!f.test(d[e])){j(b.forms.FAIL,g);return;}}j(b.forms.PASS,g);},minLen:function(d,g,h){var f=g.message||"Must be at least "+g.arg+" characters.";for(var e=0,c=d.length;e<c;e++){if(d[e].length<g.arg){h(b.forms.FAIL,f);return;}}h(b.forms.PASS,f);},maxLen:function(d,g,h){var f=g.message||"Must be at most "+g.arg+" characters.";for(var e=0,c=d.length;e<c;e++){if(d[e].length>g.arg){h(b.forms.FAIL,f);return;}}h(b.forms.PASS,f);},isEmail:function(d,g,h){var f=g.message||"Must be a valid email address.";for(var e=0,c=d.length;e<c;e++){if(!/^[A-Za-z0-9](([_\.\-]*[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-]?[a-zA-Z0-9]+)*)\.([A-Za-z]{2,})$/.test(d[e])){h(b.forms.FAIL,f);return;}}h(b.forms.PASS,f);},sameAs:function(d,h,k,j){var g=h.message||"Must be the same as: "+h.arg;var e=j[h.arg];for(var f=0,c=d.length;f<c;f++){if(d[f]!=e){k(b.forms.FAIL,g);return;}}k(b.forms.PASS,g);},ajax:function(c,f,j,h){var i={};for(var g in h){if(typeof h[g]=="string"){i[g]=escape(h[g]);}else{if(typeof h[g].push!="undefined"){i[g]=b.lang.map(h[g],function(k){return escape(k);}).join(",");}}}var d=b.lang.interpolate(f.url,i);var e=b.net.get(d,{onLoad:function(k){j(f.arg(k),"server responded");},onError:function(k){alert("Error getting file: "+d);}});},custom:function(c,d,e){d.arg.apply(this,arguments);},is:function(d,g,h){var f=g.message||"Must be "+g.arg;for(var e=0,c=d.length;e<c;e++){if(d[e]!=g.arg){h(b.forms.FAIL,f);return;}}h(b.forms.PASS,f);},isNot:function(d,g,h){var f=g.message||"Must not be "+g.arg;for(var e=0,c=d.length;e<c;e++){if(d[e]==g.arg){h(b.forms.FAIL,f);return;}}h(b.forms.PASS,f);}};var a=b.forms.feedback={};a.defaultFeedback=(function(){var c;function f(){if(!c){c=b.dom.create('<input type="hidden" value="0" name="1.5.1" id="1.5.1" />').appendTo(document.body);}c[0].value++;}function e(j){var h=j.fields,m,l,n,k,g;for(k=0,g=h.length;k<g;k++){m=b.dom.get(j.form.formNode[0].elements[h[k].name]);l=b.dom.get("."+h[k].name.replace(/(\W)/g,"\\$1")+"-msgContainer");if(!l[0]&&m.length==1){l=j.form.formNode.get("label").filter(function(){return this.htmlFor==m[0].id;});}n=l.get("span.glow-errorMsg");if(h[k].result){n.remove();m.removeClass("glow-invalid");}else{if(l.length){if(!n[0]){l.append((n=b.dom.create('<span class="glow-errorMsg"></span>')));}n.text(h[k].message);m.addClass("glow-invalid");}}}}function d(k){var n=k.fields,q,h,j,m,g,l,o;k.form.formNode.get("div.glow-errorSummary").remove();h=b.dom.create('<div class="glow-errorSummary" tabindex="-1"><ul></ul></div>');j=h.get("ul");for(l=0,o=n.length;l<o;l++){q=b.dom.get(k.form.formNode[0].elements[n[l].name]);m=b.dom.get("."+n[l].name.replace(/(\W)/g,"\\$1")+"-prompt");if(!m[0]&&q.length==1){m=k.form.formNode.get("label").filter(function(){return this.htmlFor==q[0].id;});}if(m[0]){m.get("span.glow-errorMsg").remove();g=b.lang.trim(m.text());if(g.slice(-1)==":"){g=g.slice(0,-1);}}else{g=n[l].name.replace(/^\w/,function(i){return i.toUpperCase();});}if(!n[l].result){j.append(b.dom.create("<li></li>").text(g+": "+n[l].message));}}k.form.formNode.prepend(h.css("opacity","0"));b.anim.css(h,"0.5",{opacity:{from:0,to:1}},{tween:b.tweens.easeOut()}).start();try{h[0].focus();}catch(p){}f();}return function(g){if(g.eventName=="submit"){if(!g.errorCount){g.form.formNode.get("div.glow-errorSummary").remove();return;}d(g);}setTimeout(function(){e(g);},0);return false;};}());}});(window.gloader||glow).module({name:"glow.embed",library:["glow","1.5.1"],depends:[["glow","1.5.1","glow.dom","glow.data"]],builder:function(l){function b(o){var n="";for(var p in o){if(p.toLowerCase()=="flashvars"&&typeof o[p]=="object"){n+=' FlashVars="'+l.data.encodeUrl(o[p])+'"';}else{n+=" "+p+'="'+o[p]+'"';}}return n;}function m(n){var p="",o,q;for(o in n){if(o.toLowerCase()=="flashvars"&&typeof n[o]=="object"){q=l.data.encodeUrl(n[o]);}else{q=n[o];}p+='<param name="'+o+'" value="'+q+'" />\n';}return p;}function g(o,n){o=o||{};for(var p in n){if(typeof o[p]=="undefined"){o[p]=n[p];}else{if(typeof n[p]=="object"){o[p]=g(o[p],n[p]);}}}return o;}function c(){var n=(navigator.platform||navigator.userAgent);return n.match(/win/i)?"win":n.match(/mac/i)?"mac":"other";}function j(n){var p=/^WIN (\d+),(\d+),(\d+),\d+$/;var o=n.GetVariable("$version");if($match=p.exec(o)){return{major:parseInt($match[1]),minor:parseInt($match[2]),release:parseInt($match[3]),actual:o};}else{}}function i(){var o,q,r={major:0,minor:0,release:0},n=r;if(l.env.ie){try{q=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");n=j(q);}catch(s){try{q=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{q.AllowScriptAccess="always";n=j(q);}catch(s){n={major:6,minor:0,release:29};}}catch(s){}}}else{var p=/^Shockwave Flash\s*(\d+)\.(\d+)\s*\w(\d+)$/;if((q=navigator.plugins["Shockwave Flash"])&&(o=p.exec(q.description))){n={major:parseInt(o[1]),minor:parseInt(o[2]),release:parseInt(o[3]),actual:q.description};}}n.toString=function(){return this.major?[this.major,this.minor,this.release].join("."):"No <a title='BBC Webwise article about downloading' href='http://www.bbc.co.uk/webwise/askbruce/articles/download/howdoidownloadflashplayer_1.shtml'>Flash</a> player installed, or version is pre 6.0.0.  Visit <a href='http://www.bbc.co.uk/webwise/'>BBCWebwise</a> for full instructions";};return n;}var k=i();function e(p){if(typeof p!="object"){var o=String(p).match(/^(\d+)(?:\.(\d+)(?:\.(\d+))?)?$/);if(!o){throw new Error('glow.embed._meetsVersionRequirements: invalid format for version string, require "n.n.n" or "n.n" or simply "n" where n is a numeric value');}p={major:parseInt(o[1],10),minor:parseInt(o[2]||0,10),release:parseInt(o[3]||0,10)};}var n=k,q=p;return(n.major>q.major||(n.major==q.major&&n.minor>q.minor)||(n.major==q.major&&n.minor==q.minor&&n.release>=q.release));}var d=l.env.ie?h:f;function f(p,n,o){return'<embed type="application/x-shockwave-flash" src="'+p+'"'+b(n)+b(o)+"></embed>";}function h(p,n,o){return'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" '+b(n)+'><param name="movie" value="'+p+'" />'+m(o)+"</object>";}var a={};a.Flash=function(t,n,s,r){r=g(r,{width:"100%",height:"100%",params:{allowscriptaccess:"always",allowfullscreen:"true",quality:"high"},attributes:{},message:"This content requires Flash Player version "+s+" (installed version: "+k+")"});n=l.dom.get(n);if(!n.length){throw new Error("glow.embed.Flash unable to locate container");}this.container=n;this.movie=null;this._displayErrorMessage=typeof r.message=="function"?r.message:function(){return r.message;};this.isSupported;if(this.isSupported=e(s)){var o=r.attributes,q=["id","width","height"],p=q.length;while(p--){if(r[q[p]]){o[q[p]]=r[q[p]];}}if(r.className){o["class"]=r.className;}this._embed_tag=d(t,o,r.params);}};a.Flash.version=function(){return k;};a.Flash.prototype.embed=function(){var o=this.container[0];if(this.isSupported){o.innerHTML=this._embed_tag;this.movie=o.firstChild;}else{var n=this._displayErrorMessage();if(n){o.innerHTML=n;}}return this;};l.embed=a;}});(window.gloader||glow).module({name:"glow.dragdrop",library:["glow","1.5.1"],depends:[["glow","1.5.1","glow.tweens","glow.events","glow.dom","glow.anim"]],builder:function(j){var c=j.events,k=c.addListener,t=c.fire,g=c.removeListener,q=j.dom,h=q.get,m=q.create;var n={},u=1000,a=(document.compatMode=="CSS1Compat"&&j.env.ie>=5)?true:false,v=(document.compatMode!="CSS1Compat"&&j.env.ie>=5)?true:false,d=j.env.ie>=5;function b(i,w){var x=i.prototype[w];var r="cached_"+w;i.prototype[w]=function(){if(r in this){return this[r];}return this[r]=x.apply(this,arguments);};}function f(i,r){var x=i.prototype[r];var w="cached_"+r;i.prototype[r]=function(y){if(!this[w]){this[w]={};}if(y in this[w]){return this[w][y];}return this[w][y]=x.apply(this,arguments);};}function s(y,x){for(var w=0,r=x.length;w<r;w++){delete y["cached_"+x[w]];}}var o=function(i){this.el=i;};o.prototype={val:function(i){var r=parseInt(this.el.css(i));return r||0;},width:function(){return this.borderWidth()-this.val("border-left-width")-this.val("border-right-width");},height:function(){return this.borderHeight()-this.val("border-top-width")-this.val("border-bottom-width");},offsetParentPageTop:function(){var i=this.el[0],w,r;while(i=i.offsetParent){w=h(i).css("position");if(w=="absolute"||w=="fixed"||w=="relative"){break;}}if(!i){return 0;}r=i.offsetTop;while(i=i.offsetParent){r+=i.offsetTop;}return r;},offsetTop:function(){var r=this.el[0].offsetParent,i=parseInt(this.el.css("margin-top"))||0;if(j.env.ie){while(r&&r.currentStyle.position=="static"){r=r.offsetParent;}}return this.el.offset().top-h(r||document.body).offset().top-i;},offsetLeft:function(){var y=this.el[0].offsetParent,x,w=parseInt(this.el.css("margin-left"))||0,i=0;if(j.env.ie){while(y&&y.currentStyle.position=="static"){y=y.offsetParent;}y=h(y||document.body);if(j.env.ie==6){i=parseInt(y.css("padding-left"));}}else{y=h(y);}x=this.el.offset().left-y.offset().left-i-w;return x;},borderWidth:function(){var i=this.el[0].offsetWidth;if(j.env.khtml){i-=this.val("margin-left")+this.val("margin-right")+this.val("border-left-width")+this.val("border-right-width");}return i;},borderHeight:function(){if(this._logicalBottom){return this._logicalBottom-this.offsetTop();}var i=this.el[0].offsetHeight;if(j.env.khtml){i-=this.val("margin-top")+this.val("margin-bottom")+this.val("border-top-width")+this.val("border-bottom-width");}return i;},outerWidth:function(){return this.borderWidth()+this.val("margin-left")+this.val("margin-right");},outerHeight:function(){return this.borderHeight()+this.val("margin-top")+this.val("margin-bottom");},innerLeftPos:function(){return this.offsetLeft()+this.val("margin-left")+this.val("border-left-width")+this.val("padding-left");},innerTopPos:function(){return this.offsetTop()+this.val("margin-top")+this.val("border-top-width")+this.val("padding-top");},surroundWidth:function(){return this.val("margin-left")+this.val("border-left-width")+this.val("padding-left")+this.val("padding-right")+this.val("border-right-width")+this.val("margin-right");},surroundHeight:function(){return this.val("margin-top")+this.val("border-top-width")+this.val("padding-top")+this.val("padding-bottom")+this.val("border-bottom-width")+this.val("margin-bottom");},verticalCenter:function(){return this.offsetTop()+(this.outerHeight()/2);},horizontalCenter:function(){return this.offsetTop()+(this.outerWidth()/2);}};for(var p in o.prototype){if(p=="val"){f(o,p);}else{b(o,p);}}j.lang.apply(o.prototype,{resetPosition:function(){s(this,["offsetTop","offsetLeft","borderTopPos","borderLeftPos","innerTopPos","innerLeftPos","verticalCenter","horizontalCenter"]);},setLogicalBottom:function(i){this._logicalBottom=i;},boundsFor:function(w){var r,i,x=this.el.css("position");if(x!="static"){r=i=0;}else{r=this.innerTopPos();i=this.innerLeftPos();}return[r,i+this.width()-w.outerWidth(),r+this.height()-w.outerHeight(),i];},outerBounds:function(){var r=this.offsetLeft(),i=this.offsetTop();return[i,r+this.borderWidth(),i+this.borderHeight(),r];},intersectSize:function(w,x){var r=this.outerBounds(),i=w.outerBounds();if(x){r[1]++;i[1]++;r[2]++;i[2]++;}return(r[2]<i[0]?0:i[2]<r[0]?0:r[0]<i[0]?(r[2]<i[2]?r[2]-i[0]:i[2]-i[0]):i[2]<r[2]?i[2]-r[0]:r[2]-r[0])*(r[1]<i[3]?0:i[1]<r[3]?0:r[3]<i[3]?(r[1]<i[1]?r[1]-i[3]:i[1]-i[3]):i[1]<r[1]?i[1]-r[3]:r[1]-r[3]);},sizePlaceholder:function(z,A,x,r){var y=new o(z),w=this.el,i=A||w.css("position");z.css("display","none");w.after(z);z.css("width",(this.outerWidth()-y.surroundWidth())+"px");z.css("height",(this.outerHeight()-y.surroundHeight())+"px");z.remove();z.css("display","block");if(i!="static"){z.css("left",x+"px");z.css("top",r+"px");}z.css("position",i);},contains:function(r){var i=this.boundsFor(r),x=r.offsetTop(),w=r.offsetLeft();return x>=i[0]&&w<=i[1]&&x<=i[2]&&w>=i[3];},containsPoint:function(r){var i=this.el.offset();return r.x>=i.left&&r.y>=i.top&&r.x<=i.left+this.borderWidth()&&r.y<=i.top+this.borderHeight();},positionedAncestorBox:function(){var i=this.el.parent(),r;while(i[0]){r=i.css("position")||"static";if(r=="relative"||r=="absolute"||r=="fixed"){return new o(i);}i=i.parent();}return null;}});function e(r){var i=r[0].tagName.toLowerCase()=="li"?"li":"div";var w=m("<"+i+"></"+i+">");if(i=="li"){w.css("list-style-type","none");}return w;}n.Draggable=function(y,z){this.element=h(y);this._opts=z=j.lang.apply({dragPrevention:["input","textarea","button","select","option","a"],placeholder:"spacer",placeholderClass:"glow-dragdrop-placeholder",step:{x:1,y:1}},z||{});if(typeof z.step=="number"){z.step={x:z.step,y:z.step};}else{z.step.x=z.step.x||1;z.step.y=z.step.y||1;}this._preventDrag=[];for(var w=0,r=z.dragPrevention.length;w<r;w++){this._preventDrag[w]=z.dragPrevention[w].toLowerCase();}if(z.container){this.container=h(z.container);}this._handle=z.handle&&this.element.get(z.handle)||this.element;if(z.dropTargets){this.dropTargets=h(z.dropTargets);}var x=this._listeners=[],w=0;if(z.onDrag){x[w++]=k(this,"drag",this._opts.onDrag,this);}if(z.onEnter){x[w++]=k(this,"enter",this._opts.onEnter,this);}if(z.onLeave){x[w++]=k(this,"leave",this._opts.onLeave,this);}if(z.onDrop){x[w++]=k(this,"drop",this._opts.onDrop,this);}this._dragListener=k(this._handle,"mousedown",this._startDragMouse,this);return;};n.Draggable.prototype={_createPlaceholder:function(){var i=this.element,w,r=this._box;if(this._opts.placeholder=="clone"){w=i.clone();}else{w=e(i);}if(this._opts.placeholderClass){w.addClass(this._opts.placeholderClass);}r.sizePlaceholder(w,null,this._startLeft,this._startTop);i.after(w);this._placeholder=w;},_removePlaceholder:function(){this._placeholder.remove();},_resetPosition:function(){var C=this._preDragPosition,i=this.element,w=this._box,x=this._startOffset,z=i.css("position"),B,y;w.resetPosition();var r={x:w.offsetLeft(),y:w.offsetTop()};if(this._placeholder||this._dropIndicator){i.remove();}if(C=="static"&&r.y==x.y&&r.x==x.x){i.css("position","static");i.css("left","");i.css("top","");}else{i.css("z-index",this._preDragZIndex);i.css("position",C=="static"?"relative":C);if(C=="static"){B=r.x-x.x;y=r.y-x.y;}else{if(C=="relative"&&z!="relative"){B=this._startLeft+(r.x-x.x);y=this._startTop+(r.y-x.y);}}if(z!=C){i.css("left",B?B+"px":"");i.css("top",y?y+"px":"");}}if(this._dropIndicator){var A=this._dropIndicator.parent()[0];if(A){A.replaceChild(i[0],this._dropIndicator[0]);}delete this._dropIndicator;if(this._placeholder){this._placeholder.remove();delete this._placeholder;}i.css("position",C);if(C=="relative"&&z!="relative"){i.css("left",this._startLeft);i.css("top",this._startTop);}}else{if(this._placeholder){var A=this._placeholder.parent()[0];if(A){A.replaceChild(i[0],this._placeholder[0]);}delete this._placeholder;}}},_startDragMouse:function(F){var B=this._preventDrag,w=F.source,J=w.tagName.toLowerCase();for(var D=0,C=B.length;D<C;D++){if(B[D]==J){return;}}if(t(this,"drag").defaultPrevented()){return;}if(this._dragging==1){return this.endDrag();}else{if(this._dragging){return;}}this._dragging=1;var z=this.element,y=this.container,r=this._opts,E=this._box=new o(z),A=r.step;this._preDragPosition=z.css("position");var G=this._startOffset={x:E.offsetLeft(),y:E.offsetTop()};if(y){this._containerBox=new o(y);this._bounds=this._containerBox.boundsFor(E);if(A.x!=1){this._bounds[3]-=(this._bounds[3]-G.x)%A.x;this._bounds[1]-=(this._bounds[1]-G.x)%A.x;}if(A.y!=1){this._bounds[0]-=(this._bounds[0]-G.y)%A.y;this._bounds[2]-=(this._bounds[2]-G.y)%A.y;}}else{delete this._bounds;}this._mouseStart={x:F.pageX,y:F.pageY};this._preDragStyle=z.attr("style");this._preDragZIndex=z.css("z-index");z.css("z-index",u++);this._startLeft=z[0].style.left?parseInt(z[0].style.left):0;this._startTop=z[0].style.top?parseInt(z[0].style.top):0;if(r.placeholder&&r.placeholder!="none"){this._createPlaceholder();}z.css("position","absolute");z.css("left",G.x+"px");z.css("top",G.y+"px");if(a){this._scrollY=document.documentElement.scrollTop;this._innerHeight=document.documentElement.clientHeight;}else{if(v){this._scrollY=document.body.scrollTop;this._innerHeight=document.body.clientHeight;}else{this._scrollY=window.scrollY;this._innerHeight=window.innerHeight;}}var H=function(){return false;},I=document.documentElement;if(this.dropTargets){var x=new c.Event();x.draggable=this;for(var D=0,C=this.dropTargets.length;D<C;D++){t(this.dropTargets[D],"active",x);}this._mousePos={x:F.pageX,y:F.pageY};this._testForDropTargets();}this._dragListeners=[k(I,"selectstart",H),k(I,"dragstart",H),k(I,"mousedown",H),k(I,"mousemove",this._dragMouse,this),k(I,"mouseup",this._releaseElement,this)];return false;},_dragMouse:function(z){var i=this.element,r=this._opts.axis,A=r=="y"?this._startOffset.x:(this._startOffset.x+z.pageX-this._mouseStart.x),y=r=="x"?this._startOffset.y:(this._startOffset.y+z.pageY-this._mouseStart.y),x=this._bounds,w=this._opts.step;if(w.x!=1){A=Math.round((A-this._startOffset.x)/w.x)*w.x+this._startOffset.x;}if(w.y!=1){y=Math.round((y-this._startOffset.y)/w.y)*w.y+this._startOffset.y;}if(x){if(r!="y"){A=A<x[3]?x[3]:A>x[1]?x[1]:A;}if(r!="x"){y=y<x[0]?x[0]:y>x[2]?x[2]:y;}}i[0].style.left=A+"px";i[0].style.top=y+"px";if(this.dropTargets){this._mousePos={x:z.pageX,y:z.pageY};}if(d&&z.nativeEvent.button==0){this._releaseElement(z);return false;}return false;},_testForDropTargets:function(F){if(!this._lock){this._lock=0;}if(F){this._lock--;}else{if(this.lock){return;}}if(this._dragging!=1){return;}var x=this.activeTarget,w,P=this.dropTargets,Q,A,D=this._box,I=this._mousePos;D.resetPosition();var B=0;for(var J=0,H=P.length;J<H;J++){Q=P[J];A=Q._box;if(Q._opts.tolerance=="contained"){if(A.contains(D)){w=Q;break;}}else{if(Q._opts.tolerance=="cursor"){if(A.containsPoint(I)){w=Q;break;}}else{var K=A.intersectSize(D,true);if(K>B){B=K;w=Q;}}}}this.activeTarget=w;if(w!==x){if(w){var G=new c.Event();G.draggable=this;t(w,"enter",G);var r=new c.Event();r.dropTarget=w;t(this,"enter",r);}if(x){var C=new c.Event();C.draggable=this;t(x,"leave",C);var E=new c.Event();E.dropTarget=x;t(this,"leave",E);}}if(w&&w._opts.dropIndicator!="none"){var N,L=w._childBoxes,y=w._children;D.resetPosition();var O=w._box.innerTopPos();var R=I.y-D.offsetParentPageTop();var M=0;for(var J=0,H=L.length;J<H;J++){if(y[J]==this.element[0]){continue;}N=L[J];O+=N.outerHeight();if(R<=O){if(w._dropIndicatorAt!=J){h(N.el).before(w._dropIndicator);w._dropIndicatorAt=J;}M=1;break;}}if(!M){if(N){h(N.el).after(w._dropIndicator);w._dropIndicatorAt=J+1;}else{w.element.append(w._dropIndicator);w._dropIndicatorAt=0;}}}this._lock++;var z=this;setTimeout(function(){z._testForDropTargets(1);},100);},_releaseElement:function(){if(this._dragging!=1){return;}this._dragging=2;var x,r;var B=this.dropTargets,A=this.activeTarget;if(B){for(x=0,r=B.length;x<r;x++){var z=new c.Event();z.draggable=this;z.droppedOnThis=A&&A==B[x];t(B[x],"inactive",z);}}if(A){var z=new c.Event();z.draggable=this;t(A,"drop",z);}var w=this._dragListeners;for(x=0,r=w.length;x<r;x++){c.removeListener(w[x]);}var y=t(this,"drop");if(!y.defaultPrevented()&&this.dropTargets){this.returnHome();}else{this.endDrag();}},endDrag:function(){if(this._dragging!=2){return;}this._dragging=0;if(this._reset){this._reset();delete this._reset;}if(this.placeholder){this.placeholder.remove();}this._resetPosition();delete this.activeTarget;t(this,"afterDrop");},returnHome:function(C){var w=(C)?C:j.tweens.linear(),z,i,x=this.element,r=Math.pow(Math.pow(this._startOffset.x-this._box.offsetLeft(),2)+Math.pow(this._startOffset.y-this._box.offsetTop(),2),0.5),y=0.3+(r/1000);var A=[[j.anim.css(x,y,{left:this._startOffset.x,top:this._startOffset.y},{tween:w})]];if(this._dropIndicator){A.push([j.anim.css(this._dropIndicator,y-0.1,{opacity:{to:0}})]);}var B=new j.anim.Timeline(A);k(B,"complete",function(){this.endDrag();},this);B.start();return;}};var l=0;n.DropTarget=function(i,r){i=this.element=h(i);if(!i.length){throw"no element passed into DropTarget constuctor";}if(i.length>1){throw"more than one element passed into DropTarget constructor";}this._id=++l;this._opts=r=j.lang.apply({dropIndicator:"none",dropIndicatorClass:"glow-dragdrop-dropindicator",tolerance:"intersect"},r||{});if(r.onActive){k(this,"active",r.onActive);}if(r.onInactive){k(this,"inactive",r.onInactive);}if(r.onEnter){k(this,"enter",r.onEnter);}if(r.onLeave){k(this,"leave",r.onLeave);}if(r.onDrop){k(this,"drop",r.onDrop);}k(this,"active",this._onActive);k(this,"inactive",this._onInactive);return this;};n.DropTarget.prototype={setLogicalBottom:function(i){this._logicalBottom=i;},_onActive:function(x){var r=x.draggable;this._box=new o(this.element);if(this._logicalBottom){this._box.setLogicalBottom(this._logicalBottom);}if(this._opts.dropIndicator=="none"){return;}this._onEnterListener=k(this,"enter",this._onEnter);this._onLeaveListener=k(this,"leave",this._onLeave);this._dropIndicator=e(r.element);if(this._opts.dropIndicatorClass){this._dropIndicator.addClass(this._opts.dropIndicatorClass);}r._box.sizePlaceholder(this._dropIndicator,"relative",0,0);var w=this._children=h(this.element.children()).filter(function(){var y=h(this);return(!x.draggable._placeholder||!y.eq(x.draggable._placeholder))&&(!this._dropIndicator||!y.eq(this._dropIndicator));});var i=this._childBoxes=[];w.each(function(y){i[y]=new o(h(w[y]));});},_onInactive:function(i){g(this._onEnterListener);g(this._onLeaveListener);delete this._box;if(this._opts.dropIndicator=="none"){return;}if(!i.droppedOnThis&&this._dropIndicator){this._dropIndicator.remove();delete this._dropIndicator;}delete this._childBoxes;delete this._children;},_onEnter:function(){this._dropIndicatorAt=-1;},_onLeave:function(){this._dropIndicator.remove();},moveToPosition:function(i){var y=this._dropIndicator,r=new o(y);var x=parseInt(y.css("margin-left"))||0,w=parseInt(y.css("margin-top"))||0;i._startOffset={x:r.offsetLeft()-x,y:r.offsetTop()-w};i._dropIndicator=y;delete this._dropIndicator;}};j.dragdrop=n;}});
/*@end @*/
